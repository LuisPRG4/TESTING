<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sistema de GestiÃ³n Financiera</title>
  <link rel="icon" type="image/x-icon" href="recursos/logo/SGF SS.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css?v=20251111" />
  <link rel="stylesheet" href="deudas.css?v=20251111" />
  <link rel="stylesheet" href="win11-theme.css?v=20251111">
  <link rel="stylesheet" href="movimientos-cards-fixed.css?v=20251111">
  
  <script src="enhanced-cards.js"></script>
  <script src="backup-manager.js"></script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>

  <!-- âœ… SONIDOS PARA CAMBIO DE PESTAÃ‘AS -->
  <audio id="sonidoCambioPestana" preload="auto">
    <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhEUOlV1TFXhAxQ==" type="audio/wav">
  </audio>

  <!-- Contenedor para el tÃ­tulo y el botÃ³n de tema con estilo de cristal -->
<div style="position: relative; display: flex; justify-content: space-between; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.8); border-radius: var(--radius); box-shadow: var(--shadow-sm); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.5); /* Borde sutil */">
  <!-- BotÃ³n de tema -->
  <button id="btnTema" title="Cambiar tema" style="background: none; border: 1px solid var(--text); color: var(--text); border-radius: 50%; width: 2.2rem; height: 2.2rem; font-size: 1.2rem; cursor: pointer; transition: all 0.2s; padding: 0.25rem; box-shadow: var(--shadow-sm);">ğŸŒ“</button>

  <!-- TÃ­tulo -->
  <h1 style="text-align: center; margin: 0; font-size: 3rem; color: var(--primary); font-weight: 500; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);">Sistema de GestiÃ³n Financiera</h1>

  <!-- BotÃ³n de bloqueo manual (opcional) -->
  <button id="btnBloqueoManual" title="Bloquear aplicaciÃ³n" style="display: none; background: none; border: none; color: #dc2626; font-size: 1.2rem; cursor: pointer; padding: 0.25rem; border-radius: 50%; transition: transform 0.2s; box-shadow: var(--shadow-sm);">ğŸ”’</button>
</div>
  
  
  <div class="sidebar">

    <div class="sidebar-content">

    <aside class="win11-nav">
      <div class="nav-header">
    <!-- Logo grande en la parte superior -->
    <div style="display: flex; justify-content: center; align-items: center; margin: 0.5rem 0;">
        <div style="position: relative; width: 50px; height: 50px; border-radius: 50%; background: var(--card-bg); padding: 0.2rem; box-shadow: var(--shadow-xs); transition: transform 0.3s ease;">
            <img src="recursos/logo/SGF SS.png" alt="Logo del Sistema" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover; filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.2)); transform: scale(1.3); transition: transform 0.3s ease;">
            <!-- Efecto de brillo en el borde -->
            <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; background: linear-gradient(45deg, transparent, rgba(26, 115, 232, 0.1), transparent); pointer-events: none;"></div>
        </div>
    </div>

    <!-- Barra de bÃºsqueda en la parte inferior -->
    <div class="nav-search">
        <input type="text" id="navSearch" placeholder="ğŸ”Buscar pestaÃ±as..." />
    </div>
</div>
    
      <nav class="side-tabs">

        <!-- DespuÃ©s de <nav class="side-tabs"> agregar: -->

<!-- âœ… NUEVA PESTAÃ‘A: DASHBOARD -->
<div class="category-badge">ğŸ’° FINANZAS</div>
<button class="side-tab active" onclick="mostrarSideTab('dashboard')">
  <img class="icon-png" src="recursos/icons//Nueva carpeta/Home.png" alt="Inicio">
  Inicio
</button>

<!-- âœ… NUEVA PESTAÃ‘A: MOVIMIENTOS -->
<button class="side-tab" onclick="mostrarSideTab('movimientos')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Movimiento.png" alt="Movimientos">
  Movimientos
</button>

<!-- âœ… NUEVA PESTAÃ‘A: EMPRESAS (SISTEMA MULTI-EMPRESA) -->
<button class="side-tab" onclick="mostrarSideTab('empresas')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Empresa.png" alt="Empresas">
  Empresas
</button>

<!-- âœ… NUEVA PESTAÃ‘A: ANALISIS -->
<button class="side-tab" onclick="mostrarSideTab('analisis')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/AnÃ¡lisis.png" alt="Analisis">
  AnÃ¡lisis
</button>

<!-- âœ… NUEVA PESTAÃ‘A: PRESUPUESTO -->
<button class="side-tab" onclick="mostrarSideTab('presupuesto')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Presupuesto.png" alt="Presupuesto">
  Presupuesto
</button>

<!-- âœ… NUEVA PESTAÃ‘A: PRESUPUESTO SUGERIDO -->
<button class="side-tab" onclick="mostrarSideTab('presupuesto-sugerido')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Presupuesto sugerido.png" alt="Presupuesto sugerido">
  Presupuesto Sugerido
</button>

<!-- âœ… NUEVA PESTAÃ‘A DEUDAS -->
<button class="side-tab" onclick="mostrarSideTab('deudas')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Deuda.png" alt="Deudas">
  Deudas
</button>

<!-- âœ… NUEVA PESTAÃ‘A: PROVEEDORES Y PAGOS -->
<button class="side-tab" onclick="mostrarSideTab('proveedores-pagos')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Proveedores y pagos.png" alt="Proveedores y pagos">
Proveedores y Pagos
</button>

<!-- âœ… NUEVA PESTAÃ‘A: INVENTARIO / ACTIVOS -->
<button class="side-tab" onclick="mostrarSideTab('inventario-activos')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Inventario.png" alt="Inventario / activos">
Inventario / Activos
</button>

<!-- âœ… PESTAÃ‘A AHORRO -->
<button class="side-tab" onclick="mostrarSideTab('ahorro')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Ahorro.png" alt="Ahorro">
  Ahorro
</button>

<!-- âœ… MOVER INVERSIONES A FINANZAS -->
<button class="side-tab" onclick="mostrarSideTab('inversiones')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Inversiones.png" alt="Inversiones">
  Inversiones
</button>

<div class="nav-category-separator"></div>

<!-- SEPARADOR -->
<div class="category-badge">ğŸ› ï¸ HERRAMIENTAS</div>

<!-- HERRAMIENTAS -->
<button class="side-tab" onclick="mostrarSideTab('herramientas')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Herramientas.png" alt="Herramientas">
  Herramientas
</button>

<!-- RECORDATORIOS -->
<button class="side-tab" onclick="mostrarSideTab('recordatorios')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Reloj.png" alt="Recordatorios">
  Recordatorios
</button>

<!-- âœ… NUEVA PESTAÃ‘A: NOTAS -->
<button class="side-tab" onclick="mostrarSideTab('notas')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Notas.png" alt="Notas">
  Notas
</button>

<!-- âœ… NUEVA PESTAÃ‘A: CALENDARIO VISUAL -->
<button class="side-tab" onclick="mostrarSideTab('calendario')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Calendario.png" alt="Calendario">
  Calendario
</button>

<!-- âœ… NUEVA PESTAÃ‘A: TASAS BCV -->
<button class="side-tab" onclick="mostrarSideTab('tasas-bcv')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Tasa.png" alt="Tasas">
  Tasas BCV
</button>

<!-- âœ… NUEVA PESTAÃ‘A: OPTIMIZACIÃ“N FISCAL -->
<button class="side-tab" onclick="mostrarSideTab('optimizacion-fiscal')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/OptimizaciÃ³n fiscal.png" alt="OptimizaciÃ³n fiscal">
  OptimizaciÃ³n Fiscal
</button>

<!-- âœ… NUEVA PESTAÃ‘A: REPORTES GERENCIALES -->
<button class="side-tab" onclick="mostrarSideTab('reportes-gerenciales')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Reporte gerencial.png" alt="Reportes gerenciales">
Reportes Gerenciales
</button>

<!-- âœ… NUEVA PESTAÃ‘A: ASISTENTE FINANCIERO -->
<button class="side-tab" onclick="mostrarSideTab('asistente-financiero')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Asistente financiero.png" alt="Asistente financiero">
Asistente Financiero
</button>

<!-- SEPARADOR -->
<div class="nav-category-separator"></div>

<!-- CONFIGURACIÃ“N -->
<div class="category-badge">âš™ï¸ CONFIGURACIÃ“N</div>

<!-- PESTAÃ‘A CONFIGURACIÃ“N -->
<button class="side-tab" onclick="mostrarSideTab('cambios')">
  <img class="icon-png" src="recursos/icons/Cambios.png" alt="Cambios">
  Cambios
</button>

<!-- PESTAÃ‘A CONFIGURACIÃ“N -->
<button class="side-tab" onclick="mostrarSideTab('config')">
  <img class="icon-png" src="recursos/icons/Nueva carpeta/Ajustes.png" alt="ConfiguraciÃ³n">
  ConfiguraciÃ³n
</button>


</nav>
  </aside>

  <div class="side-content active" id="side-dashboard">
    <div class="sidebar-content">
      <section id="buscador">

        <input type="text" id="txtBuscar" placeholder="ğŸ” Buscar..." />
      </section>


      <section id="resumen">

        <h2>Resumen 
    <button onclick="mostrarAyudaDashboard()" 
            style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
            title="Â¿QuÃ© significa cada secciÃ³n?">â“</button>
</h2>

        <p>Saldo actual: <strong id="saldo">Bs. 0,00</strong></p>
  <p id="saldoAviso" style="font-size: 0.875rem; color: var(--text-light); margin-top: 0.25rem; display: none;">
  ğŸ’¡ Este saldo incluye una comisiÃ³n del 0.3% aplicada automÃ¡ticamente a cada gasto.
  </p>

  <div style="text-align: center; margin-top: 1rem; font-size: 0.875rem; color: var(--text-light);">
    <span>VersiÃ³n del sistema: </span><span id="versionDashboard" style="font-weight: 600; color: var(--primary);">1.0.4</span>
</div>

  <p style="font-size:0.85rem; color:var(--text-light); margin-top:0.5rem;">
  ğŸ“ <strong>Â¿Cuidas tus datos?</strong> Haz un backup: <a href="#" onclick="exportarBackup()" style="color:var(--primary); text-decoration:underline;">Exportar</a>
  </p>
        <div style="margin-top: 1rem; display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
          <label style="font-size: 0.875rem; color: var(--text-light);">
            Convertir a:
            <select id="monedaDestino">
              <option value="USD">DÃ³lar (USD)</option>
              <option value="EUR">Euro (EUR)</option>
              <option value="COP">Peso Colombiano (COP)</option>
              <option value="ARS">Peso Argentino (ARS)</option>
              <option value="MXN">Peso Mexicano (MXN)</option>
            </select>
          </label>


          <label style="font-size: 0.875rem; color: var(--text-light);">
    Tasa del dÃ­a (Bs): 
    <input type="text" id="tasaCambio" 
           placeholder="Ej: 169,98 o 8333,33" 
           style="width: 100px; padding: 0.5rem; font-size: 1rem; border:1px solid #ccc; border-radius:8px;"
           title="Ingresa la tasa como la ves en tu app de banco: 169,98, 8.333,33, 8333.33 â€” Â¡no se formatea!" />
    <div id="tasaActual" style="font-size: 0.875rem; color: var(--text-light); margin-top: 0.25rem;">
      Tasa actual: 1 USD = 0,00 Bs
    </div>
</label>


          <div style="font-weight: 500; font-size: 1.1rem;">
            Equivalente: <span id="equivalente">--</span>
          </div>
        </div>
      </section>

<!-- âœ… NUEVA SECCIÃ“N: WIDGETS PERSONALIZABLES (OCULTA POR DEFECTO) -->
<div style="margin-top: 1rem; border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden;">
  <!-- BotÃ³n para desplegar/ocultar -->
  <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: var(--card-bg); cursor: pointer; transition: all 0.2s ease;" onclick="toggleWidgets()">
    <div style="display: flex; align-items: center; gap: 0.5rem;">
      <svg class="icon" id="flechaWidgets" viewBox="0 0 24 24" fill="#6B7280" style="width: 1rem; height: 1rem; transition: transform 0.2s;"><path d="M16 12l-4 4-4-4H16z"/></svg>
      <h2 style="color: var(--text); margin: 0; font-size: 1rem;">ğŸ“Š Widgets Personalizables<button onclick="mostrarAyudaWidgets()"style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"title="Â¿CÃ³mo personalizar los widgets?">â“</button></h2>
    </div>
    <div style="display: flex; gap: 0.5rem;">
      <button onclick="mostrarConfiguracionWidgets()" id="btnConfigWidgets" style="background: none; border: none; color: var(--primary); cursor: pointer; padding: 0.25rem; border-radius: 4px; font-size: 0.8rem; transition: background 0.2s;" title="Configurar widgets">âš™ï¸</button>
      <button onclick="agregarWidget()" style="background: var(--success); color: white; border: none; border-radius: 6px; padding: 0.5rem; font-size: 0.8rem; cursor: pointer;">â•</button>
    </div>
  </div>

  <!-- Contenido oculto (se mostrarÃ¡ con animaciÃ³n) -->
  <div id="contenidoWidgets" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease, opacity 0.3s ease; opacity: 0; padding: 0 1.5rem 1.5rem 1.5rem; background: var(--card-bg);">
    <!-- Los widgets se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
    <div id="contenedorWidgets"></div>
    <div id="mensajeSinWidgets" style="text-align: center; padding: 2rem; color: var(--text-light);">
      <p>ğŸ“­ No tienes widgets personalizados aÃºn.</p>
      <p>Haz clic en "â•" para agregar tu primer widget.</p>
    </div>
  </div>
</div>

      <section id="alertaSaldo" style="display:none;">
        <p style="color:var(--danger); font-weight:500;">
          âš ï¸ Tu saldo estÃ¡ por debajo de Bs. <span id="umbralAlerta">500</span>
        </p>
      </section>
      <section id="disponibilidad">
        <h2>Disponibilidad total</h2>
        <p><strong>Bs. <span id="totalGeneral">0,00</span></strong> en todos los bancos</p>
      </section>
      <section id="ingGastPorBanco">
        <h2>Ingresos vs Gastos por banco</h2>
        <table id="tablaBancos" style="width:100%; border-collapse:collapse;">
  <thead>
    <tr style="border-bottom:1px solid var(--text-light);">
      <th style="text-align:left;">Banco</th>
      <th style="text-align:right;">Saldo inicial</th>
      <th style="text-align:right;">Ingresos</th>
      <th style="text-align:right;">Gastos</th>
      <th style="text-align:right;">Saldo final</th>
    </tr>
  </thead>
  <tbody></tbody>
  </table>

</section>
</div> <!-- cierre sidebar-content DASHBOARD -->
</div>


<div class="side-content" id="side-movimientos">
  <div class="sidebar-content">
    <section>


      <h2>Agregar Movimiento 
        <button onclick="mostrarAyudaMovimientos()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo agregar y gestionar movimientos?">â“</button>
    </h2>

        <label for="saldoInicial">Saldo Inicial (opcional, solo se aplica una vez):
          <input type="text" id="saldoInicial" placeholder="Ej: 3.220,90" style="width:100%; padding:.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem;" />

          <!-- Debajo de <input type="text" id="saldoInicial" ... /> -->
          <div id="avisoModoSaldo" style="font-size:0.75rem; color:var(--text-light); margin-top:0.25rem; display:none;">
            ğŸ“Œ Modo: <strong id="modoActualSaldo">AutomÃ¡tico</strong>
          </div>

        </label>
        <input type="text" id="concepto" placeholder="Concepto" />
        <input type="text" id="cantidad" placeholder="Ej: 3.000,77" />

          <!-- Debajo de <input type="text" id="cantidad" ... /> -->
          <div id="avisoModoCantidad" style="font-size:0.75rem; color:var(--text-light); margin-top:0.25rem; display:none;">
            ğŸ“Œ Modo: <strong id="modoActualCantidad">AutomÃ¡tico</strong>
          </div>

        <select id="tipo">
          <option value="ingreso">Ingreso</option>
          <option value="gasto">Gasto</option>
          <option value="saldo_inicial">Saldo Inicial</option>
        </select>
        <label>CategorÃ­a:
          <div style="display:flex; gap:.5rem;">
            <select id="categoria">
              <option value="">(automÃ¡tica)</option>
              <option value="Otro">+ Nuevaâ€¦</option>
            </select>
            <button onclick="agregarCategoria()" style="padding:.5rem; border:none; background:#0b57d0; color:white; border-radius:50%; width:2rem; height:2rem; font-size:1rem;">+</button>
          </div>
        </label>
        <input type="text" id="nuevaCategoria" placeholder="Nombre nueva categorÃ­a" style="display:none;" />
        <label>Banco:
          <div style="display:flex; gap:.5rem;">
            <select id="banco">
              <option value="">(Sin banco)</option>
              <option value="Otro">+ Nuevoâ€¦</option>
            </select>
            <button onclick="agregarBanco()" style="padding:.5rem; border:none; background:#0b57d0; color:white; border-radius:50%; width:2rem; height:2rem; font-size:1rem;">+</button>
          </div>
        </label>
        <input type="text" id="nuevoBanco" placeholder="Nombre del banco" style="display:none;" />

        <label>Empresa:
          <div style="display:flex; gap:.5rem;">
            <select id="empresaMovimiento">
              <option value="">Selecciona una empresa</option>
              <option value="">Sin empresa</option>
            </select>
          </div>
        </label>

        <label>Fecha:
          <input type="date" id="fechaMov" />
        </label>

        <label style="margin-top: 1rem;">
      ğŸ“¸ Adjuntar recibo (opcional):
    <input type="file" id="recibo" accept="image/*,.pdf" style="padding:0.5rem; border:1px solid #ccc; border-radius:8px; width:100%;">
    </label>
    <p style="font-size:0.8rem; color:var(--text-light); margin-top:0.25rem;">
      ğŸ“ Soporta: JPG, PNG, PDF. No se sube a internet. Solo se guarda en tu dispositivo.
    </p>

        <div class="btn-group">
            <button onclick="agregarMovimiento()" id="btnAgregar">Agregar</button>
            <button onclick="actualizarMovimiento()" id="btnActualizar" style="display:none;">Guardar cambios</button>
            <button onclick="cancelarEdicion()" id="btnCancelarEdicion" style="display:none;">Cancelar</button>
        </div>
      </section>
      <section>
        <h2>
        Movimientos
        <button id="btnToggleLista" onclick="toggleLista()">
            <span id="iconoFlecha">â–¼</span>
        </button> 
    </h2>

    <!-- Buscador especÃ­fico para movimientos -->
<div style="margin-bottom: 1rem; position: relative; display: flex; align-items: center; width: 100%;">
  <input type="text" id="buscadorMovimientos" placeholder="ğŸ” Buscar movimientos por concepto, categorÃ­a o banco..." 
         style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; padding-right: 40px; box-sizing: border-box;" />
  <button type="button" id="limpiarBusqueda" style="
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    color: var(--text-light);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: none; /* Â¡IMPORTANTE! Oculto por defecto */
    border-radius: 50%;
    transition: background 0.2s, color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
  " title="Limpiar bÃºsqueda">
    âœ•
  </button>
</div>
    
        <div id="listaContenedor" style="display: none;">
        <ul id="listaMovimientos"></ul>
        <div id="controlesPaginacion" style="margin-top: 1rem; text-align: center;"></div>
    </div>
        <div id="controlesPaginacion" style="margin-top: 1rem; text-align: center;"></div>
      </section>
      <div class="button-center">
        <button id="botonReporte" onclick="mostrarModalReporte()" style="display:none;">ğŸ“„ Generar Reporte</button>

  <!-- Modal para selecciÃ³n de tipo de reporte -->
  <div id="modalReporte" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; max-width:400px; width:90%; margin:2rem;">
        <h2 style="text-align:center; margin-bottom:1.5rem;">ğŸ“‹ Tipo de Reporte</h2>
        <div style="display:flex; flex-direction:column; gap:1rem;">

            <button onclick="generarReporteGeneral()" style="padding:1rem; border:none; border-radius:8px; background:#0b57d0; color:white; font-size:1rem; cursor:pointer; transition:background .2s;">
    ğŸ“„ Reporte General (Todo)
</button>

            <button onclick="mostrarSeleccionCategoria()" style="padding:1rem; border:none; border-radius:8px; background:#018642; color:white; font-size:1rem; cursor:pointer; transition:background .2s;">
    ğŸ·ï¸ Reporte por CategorÃ­a
</button>

            <button onclick="mostrarSeleccionFecha()" style="padding:1rem; border:none; border-radius:8px; background:#ff9800; color:white; font-size:1rem; cursor:pointer; transition:background .2s;">
    ğŸ“… Reporte por Fecha
</button>

            <button onclick="mostrarSeleccionEmpresa()" style="padding:1rem; border:none; border-radius:8px; background:#9c27b0; color:white; font-size:1rem; cursor:pointer; transition:background .2s;">
    ğŸ¢ Reporte por Empresa
</button>
        </div>
        <button onclick="cerrarModalReporte()" style="margin-top:1.5rem; padding:0.75rem; border:none; border-radius:8px; background:var(--danger); color:white; font-size:0.9rem; cursor:pointer; width:100%;">
            âŒ Cancelar
        </button>
    </div>
  </div>

  <!-- Formulario oculto para seleccionar categorÃ­a -->
  <div id="formCategoria" style="display:none;">
    <select id="selectCategoriaReporte">
        <option value="">Selecciona una categorÃ­a</option>
    </select>
    <button onclick="generarReportePorCategoria()">Generar</button>
    <button onclick="cerrarFormCategoria()">Cancelar</button>
  </div>

  <!-- Formulario oculto para seleccionar fechas -->
  <div id="formFecha" style="display:none;">
    <label>Desde: <input type="date" id="fechaDesde"></label>
    <label>Hasta: <input type="date" id="fechaHasta"></label>
    <button onclick="generarReportePorFecha()">Generar</button>
    <button onclick="cerrarFormFecha()">Cancelar</button>
  </div>

  <!-- Formulario oculto para seleccionar empresa -->
  <div id="formEmpresa" style="display:none;">
    <select id="selectEmpresaReporte">
        <option value="">Selecciona una empresa</option>
    </select>

    <!-- Rango de fechas opcional -->
    <div style="margin: 15px 0;">
      <label style="display: block; margin-bottom: 8px; font-weight: bold;">ğŸ“… Rango de fechas (opcional):</label>
      <div style="display: flex; gap: 10px; flex-wrap: wrap;">
        <label style="flex: 1; min-width: 140px;">
          Desde
          <input type="date" id="fechaDesdeEmpresa" style="width: 100%;">
        </label>
        <label style="flex: 1; min-width: 140px;">
          Hasta
          <input type="date" id="fechaHastaEmpresa" style="width: 100%;">
        </label>
      </div>
    </div>

    <!-- Opciones de nivel de detalle -->
    <div style="margin: 15px 0;">
      <label style="display: block; margin-bottom: 8px; font-weight: bold;">ğŸ“‹ Nivel de detalle:</label>
      <label style="display: block; margin: 5px 0;">
        <input type="radio" name="nivelDetalle" value="resumen" checked> 
        Solo resumen por banco
      </label>
      <label style="display: block; margin: 5px 0;">
        <input type="radio" name="nivelDetalle" value="completo"> 
        Resumen + detalle de movimientos
      </label>
    </div>
    
    <!-- OpciÃ³n de formato -->
    <div style="margin: 15px 0;">
      <label style="display: block; margin-bottom: 8px; font-weight: bold;">ğŸ–¨ï¸ Formato:</label>
      <label style="display: block; margin: 5px 0;">
        <input type="radio" name="formatoExportacion" value="imprimir" checked> 
        Imprimir (ventana nueva)
      </label>
    </div>
    
    <button onclick="generarReportePorEmpresa()">Generar</button>
    <button onclick="cerrarFormEmpresa()">Cancelar</button>
  </div>

        </div>
      <div class="button-center">
        <button onclick="exportarExcel()">ğŸ“Š Exportar Excel</button>

      </div>
    </div> <!-- cierre sidebar-content MOVIMIENTOS-->
  </div>

<!-- ===================================================== -->
<!-- ğŸ’° PESTAÃ‘A: PRESUPUESTO SUGERIDO -->
<!-- ===================================================== -->
<div class="side-content" id="side-presupuesto-sugerido">
  <div class="sidebar-content">
    <section>
      <h2>ğŸ’° Presupuesto Sugerido</h2>

      <label for="presupuestoInicial">Presupuesto inicial (Bs):</label>
      <input type="text" id="presupuestoInicial" placeholder="Ej: 5.000,00" style="width:100%; padding:.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem;" />

      <label for="porcentajeExtra" style="margin-top:1rem; display:block;">Porcentaje adicional (%)</label>
<input type="number" id="porcentajeExtra" value="10" min="0" step="1"
       style="width:100%; padding:.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem;"
       placeholder="Ej: 10">

       <!-- âœ… NUEVO BLOQUE: RANGO DE FECHAS -->
<div style="display:flex; gap:1rem; margin-top:1rem; flex-wrap:wrap;">
  <label style="flex:1; font-size:0.9rem; color:var(--text-light);">
    Desde:
    <input type="date" id="fechaDesdePresupuesto" 
           style="width:100%; padding:0.75rem; border-radius:8px; border:1px solid #ccc; font-size:1rem;">
  </label>
  <label style="flex:1; font-size:0.9rem; color:var(--text-light);">
    Hasta:
    <input type="date" id="fechaHastaPresupuesto" 
           style="width:100%; padding:0.75rem; border-radius:8px; border:1px solid #ccc; font-size:1rem;">
  </label>
</div>
<p style="font-size:0.8rem; color:var(--text-light); margin-top:0.25rem;">
  ğŸ“… Define el rango de fechas de los movimientos que se usarÃ¡n en el cÃ¡lculo del presupuesto.
</p>

      <h3 style="margin-top:1rem;">Selecciona las categorÃ­as a incluir:</h3>
<select id="selectCategoriasPresupuesto" multiple 
        style="width:100%; height:140px; padding:.5rem; border:1px solid #ccc; border-radius:8px; font-size:1rem;">
</select>
<p style="font-size:0.8rem; color:var(--text-light); margin-top:0.25rem;">
  ğŸ’¡ Puedes mantener presionada <strong>Ctrl</strong> (o <strong>Cmd</strong> en Mac) para seleccionar varias categorÃ­as.
</p>


      <button onclick="calcularPresupuestoSugerido()" 
              style="background:#059669; color:white; padding:0.75rem 1rem; border:none; border-radius:8px; cursor:pointer;">
        Calcular presupuesto sugerido
      </button>

      <div id="resultadoPresupuesto" style="margin-top:1.5rem; font-size:1rem; color:var(--text-light);">
        <!-- AquÃ­ aparecerÃ¡ el resultado -->
      </div>

      <div id="barraPresupuestoContainer" style="margin-top: 1rem;"></div>

      <div style="margin-top:1rem; display:flex; gap:0.5rem; flex-wrap:wrap;">
  <button onclick="guardarPresupuestoEnHistorial()" 
          style="background:#2563eb; color:white; border:none; border-radius:8px; padding:0.6rem 1rem; cursor:pointer;">
    ğŸ“¦ Guardar en historial
  </button>
  <button onclick="reiniciarPresupuestoSugerido()" 
          style="background:#dc2626; color:white; border:none; border-radius:8px; padding:0.6rem 1rem; cursor:pointer;" class="btn-secundario">
    ğŸ” Reiniciar
  </button>
</div>

<hr style="margin:1.5rem 0; border:none; border-top:1px solid #ccc;"/>

<div id="contenedorHistorial" style="margin-top:1.5rem;">
  <div style="display:flex; align-items:center; justify-content:space-between;">
    <h3 style="margin:0;">ğŸ•“ Historial de presupuestos sugeridos</h3>
    <div style="display:flex; align-items:center; gap:.5rem;">
      <button id="btnToggleHistorial"
              onclick="toggleHistorial()"
              style="background:#6b7280; color:white; border:none; border-radius:6px; padding:0.4rem 0.6rem; cursor:pointer;">
        â¬†ï¸ Ocultar
      </button>
      <button onclick="eliminarHistorialPresupuestos()" 
              style="background:#dc2626; color:white; border:none; border-radius:6px; padding:0.4rem 0.6rem; cursor:pointer;">
        ğŸ—‘ï¸ Eliminar
      </button>

      <button onclick="exportarReportePresupuestos()" 
              style="background:#059669; color:white; border:none; border-radius:6px; padding:0.4rem 0.6rem; cursor:pointer;">
        ğŸ“¤ Exportar
    </button>

    </div>
  </div>

  <div id="historialWrapper" style="margin-top:0.75rem;">
    <ul id="historialPresupuestos" 
        style="list-style:none; padding:0; font-size:0.95rem; color:var(--text-light);"></ul>

    <div id="paginacionHistorial" 
         style="display:flex; justify-content:center; gap:0.5rem; margin-top:0.5rem;">
      <button id="btnPrevPagina" onclick="cambiarPaginaHistorial(-1)"
              style="background:#374151; color:white; border:none; border-radius:6px; padding:0.4rem 0.8rem; cursor:pointer;">â—€ï¸</button>
      <span id="paginaActual" style="align-self:center;">1</span>
      <button id="btnNextPagina" onclick="cambiarPaginaHistorial(1)"
              style="background:#374151; color:white; border:none; border-radius:6px; padding:0.4rem 0.8rem; cursor:pointer;">â–¶ï¸</button>

      <!-- âœ… BOTÃ“N DE IMPRESIÃ“N -->
      <button onclick="imprimirHistorialPresupuestos()" 
              style="background:#6b7280; color:white; border:none; border-radius:6px; padding:0.4rem 0.8rem; cursor:pointer; margin-left:0.5rem;">
          ğŸ–¨ï¸ Imprimir Historial
      </button>
    </div>
  </div>
</div>

    </section> <!-- cierre section -->
  </div>
</div>


  <div class="side-content" id="side-analisis">
    <div class="sidebar-content">
      <section id="grafico">

        <h2>Gastos por categorÃ­a 
          <button onclick="mostrarAyudaAnalisis()" 
                  style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                  title="Â¿CÃ³mo interpretar los grÃ¡ficos?">â“</button>
      </h2>

        <canvas id="torta" style="max-width:100%; height:auto;"></canvas>
      </section>
      <section id="barras">
        <h2>Resumen mensual</h2>
        <canvas id="barChart" style="max-width:100%; height:auto;"></canvas>
      </section>
      <section id="resumenBancos">
        <h2>Resumen por banco</h2>
        <select id="filtroBanco">
          <option value="">Todos los bancos</option>
        </select>
        <ul id="listaBancos"></ul>


            </section>
      </div> <!-- cierre sidebar-content ANALISIS -->
    </div>

    <div class="side-content" id="side-presupuesto">
      <div class="sidebar-content">
        <section id="presupuestoMeta">

          <h2>ğŸ¯ Meta de Presupuesto 
            <button onclick="mostrarAyudaPresupuesto()" 
                    style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                    title="Â¿CÃ³mo funciona esta pestaÃ±a?">â“</button>
        </h2>

  <p style="margin-bottom: 1rem; color: var(--text-light);">Define tu meta mensual y tu progreso actual.</p>
  <div style="display:flex; gap:1rem; margin-bottom:1.5rem;">
    <div style="flex:1;">
      <label for="metaPresupuesto">Meta mensual (Bs):</label>
      <input type="number" id="metaPresupuesto" placeholder="Ej: 20000" step="100" min="0" />
    </div>
    <div style="flex:1;">
      <label for="presupuestoActual">Gasto actual (Bs):</label>
      <input type="text" id="presupuestoActual" placeholder="AutomÃ¡tico" readonly style="background:var(--card-bg); color:var(--text-light); cursor:not-allowed; font-family: 'Space Mono', monospace; text-align: right;" />
    </div>
  </div>
  <div style="display:flex; gap:0.75rem; margin-bottom:1.5rem;">
    <button onclick="guardarMetaPresupuesto()" style="flex:1; background:#0b57d0; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:0.9rem;">ğŸ’¾ Guardar Meta</button>
    <button onclick="eliminarMetaPresupuesto()" style="flex:1; background:#b00020; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:0.9rem; opacity:0.9; transition:opacity 0.2s;">ğŸ—‘ï¸ Eliminar Meta</button>
  </div>
  </section>

      <section id="presupuestoGrafico">
        <h2>ğŸ“Š Progreso del Presupuesto</h2>
        <div style="background:var(--card-bg); border-radius:var(--radius); padding:1.5rem; box-shadow:var(--shadow-sm); margin-bottom:1.5rem;">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
            <span style="font-weight:500;">Gasto actual</span>
            <span id="progresoTexto" style="font-weight:700; color:var(--text);">0%</span>
          </div>
          <div style="height:20px; background:#e0e0e0; border-radius:10px; overflow:hidden; margin-bottom:1rem;">
            <div id="barraProgreso" style="height:100%; width:0%; background:linear-gradient(90deg, #018642, #0b57d0); transition:width 0.5s ease;"></div>
          </div>
          <div style="display:flex; justify-content:space-between; font-size:0.875rem; color:var(--text-light);">
            <span>Meta: <span id="metaTexto">Bs. 0</span></span>
            <span>Gastado: <span id="gastadoTexto">Bs. 0</span></span>
          </div>
        </div>
      </section>

      <section id="presupuestoDetalles">
        <h2>ğŸ“Š Gastos por categorÃ­a (Ãºltimos 30 dÃ­as)</h2>

  <ul id="listaPresupuestoDetalles" style="padding: 0; margin: 0;"></ul>

  <div style="text-align:center; margin-top:1rem;">
    <button onclick="actualizarPresupuesto()" style="background:#0b57d0; color:white; border:none; border-radius:8px; padding:0.5rem 1rem; font-size:0.9rem;">Actualizar</button>
  </div>
  <p id="leyendaPresupuesto" style="margin-top:1.5rem; font-size:0.85rem; color:var(--text-light); text-align:center; font-style:italic; max-width:400px; margin-left:auto; margin-right:auto; display:none;">
    ğŸ“Œ <strong>Â¿Sin meta?</strong> Esta pestaÃ±a muestra tu gasto real. Define una meta para ver tu progreso.
  </p>

</section>
</div> <!-- cierre sidebar-content PRESPUESTO -->
</div>

    <!-- (FORMATEADOR DE NÃšMEROS) -->
    <div class="side-content" id="side-herramientas">
      <div class="sidebar-content">
        <section>

          <h2>ğŸ› ï¸ Formateador de NÃºmeros 
            <button onclick="mostrarAyudaHerramientas()" 
                    style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                    title="Â¿Para quÃ© sirven estas herramientas?">â“</button>
        </h2>

      <p style="color: var(--text-light); margin-bottom: 1.5rem;">
        Pega o escribe cualquier nÃºmero (ej: 1111783.99) y lo convertiremos automÃ¡ticamente a formato venezolano: <strong>1.111.783,99</strong>.
      </p>
      <label for="inputNumero">NÃºmero sin formato:</label>
      <input type="text" id="inputNumero" placeholder="Ej: 1111783.99 o 1.111.783,99" 
             style="width:100%; padding:1rem; font-size:1.1rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:8px;">
      <div style="background:var(--card-bg); padding:1.25rem; border-radius:8px; border:1px solid #eee; margin-bottom:1.5rem;">
        <label>Formateado (Venezuela):</label>
        <div id="numeroFormateado" style="font-family:'Space Mono', monospace; font-size:1.5rem; font-weight:600; color:var(--primary); padding:1rem; background:#f9f9f9; border-radius:6px; margin-top:0.5rem;">
          0,00
        </div>
      </div>
      <div style="display:flex; gap:0.75rem; margin-bottom:1.5rem;">
        <button onclick="copiarFormateado()" style="flex:1; background:#0b57d0; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ“‹ Copiar al Portapapeles</button>
        <button onclick="usarEnCantidad()" style="flex:1; background:#018642; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ’¸ Usar en Cantidad</button>
        <button onclick="usarEnSaldoInicial()" style="flex:1; background:#ff9800; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ¦ Usar en Saldo Inicial</button>
      </div>
      <p style="font-size:0.85rem; color:var(--text-light); text-align:center;">
        âš ï¸ Esta herramienta no guarda datos. Solo te ayuda a formatear antes de agregar un movimiento.
      </p>
    </section>

   <!-- âœ… NUEVA HERRAMIENTA: CÃLCULO DE EQUIVALENTE -->
<section style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--text-light);">
  <h2>ğŸ“Š Calculadora de Equivalente</h2>
  <p style="color: var(--text-light); margin-bottom: 1rem;">
    Usa el saldo de <strong>Disponibilidad Total</strong> (de la pestaÃ±a Dashboard) y conviÃ©rtelo a otra moneda.
  </p>

  <div style="display:flex; gap:1rem; align-items:center; margin-bottom:1rem;">
    <label style="flex:1; font-size:0.875rem; color:var(--text-light);">
      Convertir a:
      <select id="monedaHerramienta" style="width:100%; padding:0.75rem; border-radius:8px; border:1px solid #ccc; margin-top:0.5rem;">
        <option value="USD">DÃ³lar (USD)</option>
        <option value="EUR">Euro (EUR)</option>
        <option value="COP">Peso Colombiano (COP)</option>
        <option value="ARS">Peso Argentino (ARS)</option>
        <option value="MXN">Peso Mexicano (MXN)</option>
      </select>
    </label>
  </div>

  <label for="tasaHerramienta">Tasa del dÃ­a (Bs):</label>
  <input type="text" id="tasaHerramienta" 
         placeholder="Ej: 169,98 o 8333,33" 
         style="width:100%; padding:1rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;"
         title="Ingresa la tasa como la ves en tu app de banco: 169,98, 8.333,33, 8333.33 â€” Â¡no se formatea!" />

  <div style="display:flex; gap:0.75rem; margin-bottom:1.5rem;">
    <button id="btnCalcularEquivalente" style="flex:1; background:#0b57d0; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ“Š Calcular Equivalente</button>
    <button id="btnLimpiarEquivalente" style="flex:1; background:#ff9800; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ§¹ Limpiar</button>
  </div>

  <div style="background:var(--card-bg); padding:1.5rem; border-radius:8px; border:1px solid #eee; margin-bottom:1.5rem;">
    <label>Equivalente:</label>
    <div id="equivalenteHerramienta" style="font-family:'Space Mono', monospace; font-size:1.8rem; font-weight:600; color:var(--primary); padding:1rem; background:#f9f9f9; border-radius:6px; margin-top:0.5rem;">
      --
    </div>
  </div>

  <p style="font-size:0.85rem; color:var(--text-light);">
    ğŸ“Œ Esta herramienta toma el saldo de <strong>Disponibilidad Total</strong> (Bs. <code id="totalGeneral">0,00</code>) de la pestaÃ±a Dashboard.  
    No depende de tu tasa guardada en el dashboard.  
    Â¡Tienes control total!
  </p>

</section>
</div> <!-- cierre sidebar-content Herramientas-->
</div>


<!-- âœ… NUEVA PESTAÃ‘A: CALENDARIO VISUAL INTERACTIVO -->
<div class="side-content" id="side-calendario">
  <div class="sidebar-content">
    <section>
      <h2>ğŸ“… Calendario de Movimientos
        <button onclick="mostrarAyudaCalendario()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo funciona este calendario?">â“</button>
      </h2>
      <p style="color: var(--text-light); margin-bottom: 1.5rem; font-size: 0.85rem;">
        Ver tus movimientos por dÃ­a en un calendario visual moderno. Haz clic en un dÃ­a para ver sus movimientos.
      </p>

      <!-- âœ… CALENDARIO VISUAL (solo mes actual) -->
      <div id="calendarContainer" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.25rem; margin-bottom: 1.5rem; max-width: 300px; margin-left: auto; margin-right: auto;">
        <!-- Los dÃ­as se generarÃ¡n dinÃ¡micamente aquÃ­ -->
      </div>

      <div style="text-align: center; font-size: 0.8rem; color: var(--text-light); margin-top: 0.5rem;">
        <span id="calendarMonthYear">Septiembre 2025</span>
      </div>

      <!-- âœ… NAVEGACIÃ“N POR MES -->
      <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 1rem; font-size: 0.85rem; color: var(--text-light);">
        <button onclick="cambiarMes(-1)" style="background: none; border: none; color: var(--primary); cursor: pointer; padding: 0.5rem; border-radius: 50%; font-size: 1.2rem; transition: background 0.2s;">â†</button>
        <span id="calendarMonthYearNav">Septiembre 2025</span>
        <button onclick="cambiarMes(1)" style="background: none; border: none; color: var(--primary); cursor: pointer; padding: 0.5rem; border-radius: 50%; font-size: 1.2rem; transition: background 0.2s;">â†’</button>
      </div>

      <!-- âœ… LEGENDA -->
      <div style="display: flex; justify-content: center; gap: 1rem; margin-top: 1rem; font-size: 0.75rem; color: var(--text-light);">
        <div style="display: flex; align-items: center; gap: 0.25rem;">
          <div style="width: 6px; height: 6px; background: var(--primary); border-radius: 50%;"></div>
          <span>Movimiento</span>
        </div>
        <div style="display: flex; align-items: center; gap: 0.25rem;">
          <div style="width: 10px; height: 10px; background: var(--primary); border-radius: 50%; border: 1px solid var(--text-light);"></div>
          <span>Hoy</span>
        </div>
      </div>

      <!-- âœ… LISTA DE TARJETAS DE MOVIMIENTOS (oculta al inicio) -->
      <div id="movimientosDiaContainer" style="margin-top: 2rem; display: none;">
        <h3 style="margin-bottom: 1rem; color: var(--text); text-align: center;">Movimientos del <span id="fechaSeleccionada">01 de Septiembre 2025</span></h3>
        <div id="tarjetasMovimientos" class="presupuesto-grid" style="margin-bottom: 1rem;">
          <!-- Las tarjetas se generarÃ¡n aquÃ­ dinÃ¡micamente -->
        </div>
        <div id="paginacionTarjetas" class="paginacion-presupuesto" style="justify-content: center; margin-top: 1.5rem; display: none;">
          <button onclick="cambiarPaginaTarjetas(-1)" id="btnAnteriorTarjetas" disabled>â†</button>
          <span class="paginacion-info" id="infoPaginacion">PÃ¡gina 1 de 1</span>
          <button onclick="cambiarPaginaTarjetas(1)" id="btnSiguienteTarjetas" disabled>â†’</button>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- INVERSIONES-->
<div class="side-content" id="side-inversiones">
  <div class="sidebar-content">
    <section>
      <h2>Simulador de Inversiones 
        <button onclick="mostrarAyudaInversiones()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo funciona el simulador de inversiones?">â“</button>
      </h2>
      <p style="color: var(--text-light); margin-bottom: 1rem;">
        Simula inversiones en acciones, criptomonedas o fondos. Los precios se actualizan automÃ¡ticamente.
      </p>

      <!-- Formulario para agregar nueva inversiÃ³n -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
        <h3 style="margin-top: 0;">Agregar InversiÃ³n</h3>
        <label for="activoInversion">Activo (ej: AAPL, BTC):</label>
        <input type="text" id="activoInversion" placeholder="SÃ­mbolo del activo" />

        <label for="cantidadInvertida">Cantidad invertida (Bs):</label>
        <input type="text" id="cantidadInvertida" placeholder="Ej: 1000" />

        <label for="fechaInversion">Fecha de inversiÃ³n:</label>
        <input type="date" id="fechaInversion" />

        <label for="tipoActivo">Tipo de activo:</label>
        <select id="tipoActivo">
          <option value="accion">AcciÃ³n</option>
          <option value="cripto">Criptomoneda</option>
          <option value="fondo">Fondo de inversiÃ³n</option>
        </select>

        <button onclick="agregarInversion()">Agregar InversiÃ³n</button>
      </div>

      <!-- Lista de inversiones actuales -->
      <div>
        <h3>Mis Inversiones</h3>
        <ul id="listaInversiones"></ul>
      </div>

      <!-- GrÃ¡fico de rendimiento -->
      <div style="margin-top: 2rem;">
        <h3>Rendimiento</h3>
        <canvas id="graficoInversiones" style="max-width: 100%; height: 300px;"></canvas>
      </div>
    </section>
  </div>
</div>

<!-- DEUDAS Y PRÃ‰STAMOS-->
<div class="side-content" id="side-deudas">
  <div class="sidebar-content">
    <section id="registroDeuda">
      <h2>ğŸ’° Registrar Nueva Deuda/PrÃ©stamo
        <button onclick="mostrarAyudaDeudas()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo gestionar deudas y prÃ©stamos?">â“</button>
      </h2>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <label>
          <input type="radio" name="tipoDeuda" value="debo" checked> Le debo a alguien
        </label>
        <label>
          <input type="radio" name="tipoDeuda" value="me_deben"> Alguien me debe
        </label>
      </div>

      <input type="text" id="nombreDeudor" placeholder="Nombre de la persona/entidad" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />

      <input type="text" id="montoDeuda" placeholder="Monto (ej: 50.00)" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />

      <select id="monedaDeuda" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;">
        <option value="USD">DÃ³lar (USD)</option>
        <option value="EUR">Euro (EUR)</option>
        <option value="VES">BolÃ­var (VES)</option>
      </select>

      <input type="date" id="fechaDeuda" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />

      <label style="display: block; margin-bottom: 0.5rem;">
        <input type="checkbox" id="tieneInteres"> Tiene interÃ©s (% anual)
      </label>
      
      <div id="camposInteres" style="display: none; margin-bottom: 1rem;">
        <input type="number" id="tasaInteres" placeholder="Tasa de interÃ©s (%)" step="0.01" min="0" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;" />
      </div>

      <label style="display: block; margin-bottom: 0.5rem;">
        <input type="checkbox" id="tieneFechaVencimiento"> Tiene fecha de vencimiento
      </label>
      
      <div id="camposVencimiento" style="display: none; margin-bottom: 1rem;">
        <input type="date" id="fechaVencimiento" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;" />
      </div>

      <textarea id="descripcionDeuda" placeholder="DescripciÃ³n/observaciones (opcional)" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem; min-height: 80px; resize: vertical;"></textarea>

      <div style="display: flex; gap: 0.75rem;">
        <button onclick="guardarDeuda()" style="flex: 1; background: #0b57d0; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">ğŸ’¾ Guardar Deuda</button>
        <button onclick="limpiarFormularioDeuda()" style="flex: 1; background: #6b7280; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">ğŸ§¹ Limpiar</button>
      </div>
    </section>

    <section id="listaDeudas">
      <h2>ğŸ“‹ Mis Deudas/PrÃ©stamos</h2>
      <div id="filtrosDeudas" style="margin-bottom: 1rem;">
        <select id="filtroEstadoDeuda" style="margin-right: 0.5rem; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;">
          <option value="">Todas las deudas</option>
          <option value="pendiente">Pendientes</option>
          <option value="pagada">Pagadas</option>
          <option value="vencida">Vencidas</option>
        </select>
        <select id="filtroTipoDeuda" style="padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;">
          <option value="">Todos los tipos</option>
          <option value="debo">Debo dinero</option>
          <option value="me_deben">Me deben dinero</option>
        </select>
      </div>
      <div id="contenedorDeudas">
        <!-- Las deudas se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
      </div>
    </section>

    <section id="resumenDeudas">
      <h2>ğŸ“Š Resumen de Deudas</h2>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <div style="background: var(--card-bg); padding: 1rem; border-radius: var(--radius); text-align: center;">
          <p style="color: var(--text-light); margin: 0 0 0.5rem 0;">Total que debo</p>
          <p style="font-size: 1.5rem; font-weight: 600; color: var(--danger); margin: 0;">Bs. <span id="totalDebo">0,00</span></p>
        </div>
        <div style="background: var(--card-bg); padding: 1rem; border-radius: var(--radius); text-align: center;">
          <p style="color: var(--text-light); margin: 0 0 0.5rem 0;">Total que me deben</p>
          <p style="font-size: 1.5rem; font-weight: 600; color: var(--success); margin: 0;">Bs. <span id="totalMeDeben">0,00</span></p>
        </div>
      </div>
    </section>

    <section id="alertasDeudas">
      <h2>ğŸš¨ Alertas de Vencimiento</h2>
      <div id="contenedorAlertas">
        <p style="color: var(--text-light); text-align: center; font-style: italic;">No hay alertas pendientes</p>
      </div>
    </section>

    <section id="calculadoraIntereses">
      <h2>ğŸ§® Calculadora de Intereses</h2>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <div>
          <label>Capital:</label>
          <input type="text" id="capitalInteres" placeholder="1000" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;" />
        </div>
        <div>
          <label>Tasa anual (%):</label>
          <input type="number" id="tasaInteresCalc" placeholder="12" step="0.01" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;" />
        </div>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <div>
          <label>PerÃ­odo (aÃ±os):</label>
          <input type="number" id="periodoInteres" placeholder="1" step="0.01" min="0" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;" />
        </div>
        <div>
          <label>Monto final:</label>
          <input type="text" id="montoFinalInteres" readonly style="width: 100%; padding: 0.5rem; background: var(--card-bg); border: 1px solid #ccc; border-radius: 6px;" />
        </div>
      </div>
      <button onclick="calcularIntereses()" style="width: 100%; background: var(--primary); color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">ğŸ“Š Calcular Intereses</button>
    </section>

    <section id="exportarDeudas">
      <h2>ğŸ“„ Exportar Plan de Pagos</h2>
      <div style="margin-bottom: 1rem;">
        <label>Seleccionar deuda:</label>
        <select id="deudaParaPlan" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;">
          <option value="">Selecciona una deuda</option>
        </select>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <div>
          <label>NÃºmero de pagos:</label>
          <input type="number" id="numPagos" placeholder="12" min="1" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;" />
        </div>
        <div>
          <label>Frecuencia:</label>
          <select id="frecuenciaPagos" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;">
            <option value="mensual">Mensual</option>
            <option value="quincenal">Quincenal</option>
            <option value="semanal">Semanal</option>
          </select>
        </div>
      </div>
      <button onclick="generarPlanPagosPDF()" style="width: 100%; background: #059669; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">ğŸ“„ Generar PDF</button>
    </section>
  </div>
</div>

<!-- âœ… NUEVA SECCIÃ“N: REGISTRO DE CAMBIOS -->
<!-- Cambios y actualizaciones-->
<div class="side-content" id="side-cambios">
  <div class="sidebar-content">
    <section id="cambios">

     <!-- Imagen de logo (ajustado al mÃ¡ximo sin perder calidad) -->
<div style="display: flex; justify-content: center; align-items: center; margin-bottom: 1rem;">
    <div style="position: relative; width: 90px; height: 90px; border-radius: 50%; background: var(--card-bg); padding: 0.2rem; box-shadow: var(--shadow-md); transition: transform 0.3s ease;">
        <img src="recursos/logo/SGF SS.png" alt="Logo del Sistema" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover; filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.2)); transform: scale(1.25); transition: transform 0.3s ease;">
        <!-- Efecto de brillo en el borde -->
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; background: linear-gradient(45deg, transparent, rgba(26, 115, 232, 0.1), transparent); pointer-events: none;"></div>
    </div>
</div>

      <h2>ğŸ”„ Registro de Cambios</h2>
      <p style="text-align: center; margin-bottom: 1.5rem; font-size: 0.875rem; color: var(--text-light);">
        VersiÃ³n actual del sistema: <span id="versionActual" style="font-weight: 600; color: var(--primary);">1.1.2</span>
      </p>

      <!-- VersiÃ³n 1.1.2 -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid var(--success);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--success);">âœ¨ VersiÃ³n 1.1.2 - <span style="color: var(--text-light); font-weight: normal;">(23 Oct 2025)</span></h3>
        <ul style="color: var(--text-light); line-height: 1.6; margin: 0; padding-left: 1.5rem;">
          <li><strong>ğŸ”’ Seguridad Mejorada:</strong> Sistema de bloqueo con PIN y preguntas de seguridad, reemplazando la opciÃ³n de "reset".</li>
          <li><strong>ğŸ’¬ Asistente Financiero Actualizado:</strong> Eliminado el modo conversacional no profesional y enfocado en datos financieros empresariales.</li>
          <li><strong>ğŸ¨ DiseÃ±o de Cristal (Glassmorphism):</strong> Nuevo estilo de fondo en el encabezado con efecto de vidrio elegante.</li>
          <li><strong>ğŸ“Œ OrganizaciÃ³n de PestaÃ±as:</strong> Movida la pestaÃ±a "Recordatorios" dentro de "Herramientas" para mayor coherencia.</li>
          <li><strong>ğŸ“Š Funcionalidad de Notificaciones:</strong> Sistema de notificaciones push para recordatorios y alertas.</li>
          <li><strong>ğŸ› ï¸ Herramientas de Formateo:</strong> Mejoras en la herramienta de formato de nÃºmeros y conversiones.</li>
          <li><strong>ğŸ“¦ Inventario / Activos:</strong> Nueva secciÃ³n para registrar y gestionar bienes fÃ­sicos o intangibles.</li>
        </ul>
      </div>

      <!-- VersiÃ³n 1.1.1 -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid var(--info);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--info);">ğŸš€ VersiÃ³n 1.1.1 - <span style="color: var(--text-light); font-weight: normal;">(22 Oct 2025)</span></h3>
        <ul style="color: var(--text-light); line-height: 1.6; margin: 0; padding-left: 1.5rem;">
          <li><strong>ğŸ¨ RediseÃ±o Completo de Iconos:</strong> Todos los Ã­conos de la barra lateral han sido actualizados a un estilo moderno y consistente.</li>
          <li><strong>ğŸ§© Nueva PestaÃ±a de Asistente Financiero:</strong> Agregado el mÃ³dulo de IA para sugerencias inteligentes y automatizaciÃ³n de tareas.</li>
          <li><strong>ğŸ“ˆ Mejoras en Reportes Gerenciales:</strong> Se ha optimizado la visualizaciÃ³n de datos y se han aÃ±adido nuevas mÃ©tricas.</li>
          <li><strong>ğŸ”§ OptimizaciÃ³n Fiscal:</strong> Nueva secciÃ³n para gestionar deducciones y optimizar impuestos.</li>
          <li><strong>ğŸ› ï¸ Correcciones de Bug:</strong> Solucionado el problema de renderizado en Firefox y Chrome.</li>
        </ul>
      </div>

      <!-- VersiÃ³n 1.1.0 -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid var(--success);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--success);">âœ¨ VersiÃ³n 1.1.0 - <span style="color: var(--text-light); font-weight: normal;">(15 Oct 2025)</span></h3>
        <ul style="color: var(--text-light); line-height: 1.6; margin: 0; padding-left: 1.5rem;">
          <li><strong>ğŸ“… Calendario Visual Interactivo:</strong> Nuevo calendario que muestra tus movimientos por dÃ­a con tarjetas dinÃ¡micas.</li>
          <li><strong>ğŸ’° Presupuesto Sugerido:</strong> Sistema inteligente que propone un presupuesto basado en tus gastos histÃ³ricos.</li>
          <li><strong>ğŸ“Š GrÃ¡ficos de ComparaciÃ³n de Bancos:</strong> Ahora puedes ver la distribuciÃ³n de tus fondos entre diferentes cuentas bancarias.</li>
          <li><strong>ğŸ”” Recordatorios Avanzados:</strong> AÃ±adida la opciÃ³n de repeticiÃ³n (diaria, semanal, mensual) y configuraciÃ³n global.</li>
          <li><strong>ğŸ“¦ Inventario / Activos:</strong> Nueva secciÃ³n para registrar y gestionar tus bienes fÃ­sicos o intangibles.</li>
        </ul>
      </div>

      <!-- VersiÃ³n 1.0.4 -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid var(--warning);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--warning);">âš™ï¸ VersiÃ³n 1.0.4 - <span style="color: var(--text-light); font-weight: normal;">(05 Oct 2025)</span></h3>
        <ul style="color: var(--text-light); line-height: 1.6; margin: 0; padding-left: 1.5rem;">
          <li><strong>ğŸ“± DiseÃ±o Responsivo Mejorado:</strong> El sistema ahora se adapta perfectamente a pantallas pequeÃ±as y mÃ³viles.</li>
          <li><strong>ğŸ”Š Sonidos Personalizables:</strong> Puedes activar/desactivar los sonidos al cambiar de pestaÃ±as y elegir el tono.</li>
          <li><strong>ğŸ”’ Seguridad Mejorada:</strong> Implementado el sistema de bloqueo manual con PIN para mayor privacidad.</li>
          <li><strong>ğŸ“š Herramientas de Formateo:</strong> Nuevas herramientas para formatear nÃºmeros y convertir monedas de forma rÃ¡pida.</li>
          <li><strong>ğŸ“‹ Notas Personales:</strong> Agregada la posibilidad de crear, editar y eliminar notas dentro del sistema.</li>
        </ul>
      </div>

      <!-- VersiÃ³n 1.0.3 -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid var(--primary);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--primary);">ğŸ“Œ VersiÃ³n 1.0.3 - <span style="color: var(--text-light); font-weight: normal;">(01 Oct 2025)</span></h3>
        <ul style="color: var(--text-light); line-height: 1.6; margin: 0; padding-left: 1.5rem;">
          <li><strong>ğŸ¯ RediseÃ±o del MenÃº Lateral:</strong> Nueva organizaciÃ³n por categorÃ­as y mejor jerarquÃ­a visual.</li>
          <li><strong>ğŸ” Buscador del Dashboard:</strong> Funcionalidad completa para buscar movimientos directamente desde el resumen.</li>
          <li><strong>ğŸ“Š AnÃ¡lisis de Gastos:</strong> GrÃ¡ficos de barras y torta para entender mejor tus patrones de gasto.</li>
          <li><strong>ğŸ“‰ Presupuesto DinÃ¡mico:</strong> El sistema ahora calcula automÃ¡ticamente tu progreso hacia la meta mensual.</li>
          <li><strong>ğŸ’¾ Backup AutomÃ¡tico:</strong> Copias de seguridad automÃ¡ticas para proteger tus datos financieros.</li>
        </ul>
      </div>

      <!-- VersiÃ³n 1.0.2 -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid var(--danger);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--danger);">ğŸ› VersiÃ³n 1.0.2 - <span style="color: var(--text-light); font-weight: normal;">(25 Sep 2025)</span></h3>
        <ul style="color: var(--text-light); line-height: 1.6; margin: 0; padding-left: 1.5rem;">
          <li><strong>âœ… CorrecciÃ³n de Bugs:</strong> Solucionado el error en el modo literal de entrada de nÃºmeros.</li>
          <li><strong>ğŸ–¼ï¸ Mejoras Visuales:</strong> Actualizados los colores y estilos de los botones y tarjetas.</li>
          <li><strong>â±ï¸ Rendimiento Optimizado:</strong> El sistema carga mÃ¡s rÃ¡pido y consume menos memoria.</li>
          <li><strong>ğŸ“ DocumentaciÃ³n Interna:</strong> AÃ±adidas guÃ­as de ayuda (tooltips) para todas las funciones principales.</li>
        </ul>
      </div>

      <!-- VersiÃ³n 1.0.1 -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid var(--text-light);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--text-light);">ğŸ“¦ VersiÃ³n 1.0.1 - <span style="color: var(--text-light); font-weight: normal;">(20 Sep 2025)</span></h3>
        <ul style="color: var(--text-light); line-height: 1.6; margin: 0; padding-left: 1.5rem;">
          <li><strong>ğŸ“ Estructura Inicial:</strong> Primera versiÃ³n estable del sistema con funcionalidades bÃ¡sicas.</li>
          <li><strong>ğŸ’¸ GestiÃ³n de Movimientos:</strong> MÃ³dulo principal para registrar ingresos y gastos.</li>
          <li><strong>ğŸ“Š Resumen General:</strong> Dashboard inicial con saldo total y resumen por banco.</li>
          <li><strong>âš™ï¸ ConfiguraciÃ³n BÃ¡sica:</strong> Opciones para cambiar el tema (claro/oscuro) y guardar preferencias.</li>
        </ul>
      </div>

      <div style="text-align: center; padding: 1rem; background: var(--card-bg); border-radius: var(--radius); border: 1px solid var(--border); margin-top: 2rem;">
        <p style="margin: 0; color: var(--text-light); font-size: 0.9rem;">
          <strong>ğŸ’¡ Consejo:</strong> Siempre revisa esta pestaÃ±a para estar al tanto de las Ãºltimas novedades y mejoras en tu sistema financiero.
        </p>
      </div>
    </section> <!-- CIERRE DE LA PESTAÃ‘A CAMBIOS -->
  </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: TASAS BCV -->
<div class="side-content" id="side-tasas-bcv">
  <div class="sidebar-content">
    <section>
      <h2>ğŸ¦ Tasas BCV del DÃ­a
        <button onclick="mostrarAyudaBCV()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo funcionan las tasas BCV?">â“</button>
      </h2>
      <p style="color: var(--text-light); margin-bottom: 1rem;">
        Consulta automÃ¡ticamente las tasas oficiales del Banco Central de Venezuela (BCV) y mantenlas actualizadas en tu sistema.
      </p>

      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
        <h3 style="margin-top: 0; color: var(--primary);">ğŸ’± Tasas Actuales</h3>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div style="text-align: center; padding: 1rem; background: var(--success-bg); border-radius: 8px;">
            <div style="font-size: 0.8rem; color: var(--success-text); margin-bottom: 0.5rem;">DÃ³lar Oficial (BCV)</div>
            <div id="tasaBCV" style="font-size: 1.5rem; font-weight: 600; color: var(--success);">--</div>
            <div id="fechaBCV" style="font-size: 0.7rem; color: var(--success-text); margin-top: 0.25rem;">Actualizado: --</div>
          </div>
          
          <div style="text-align: center; padding: 1rem; background: var(--info-bg); border-radius: 8px;">
            <div style="font-size: 0.8rem; color: var(--info-text); margin-bottom: 0.5rem;">Euro Oficial (BCV)</div>
            <div id="tasaBCVEUR" style="font-size: 1.5rem; font-weight: 600; color: var(--info);">--</div>
            <div id="fechaBCVEUR" style="font-size: 0.7rem; color: var(--info-text); margin-top: 0.25rem;">Actualizado: --</div>
          </div>
        </div>

        <div style="display: flex; gap: 0.75rem; margin-bottom: 1rem;">
          <button onclick="obtenerTasasBCV()" style="flex: 1; background: #0b57d0; color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1rem;">
            ğŸ”„ Actualizar Tasas
          </button>
          <button onclick="usarTasaBCV()" style="flex: 1; background: #018642; color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1rem;">
            ğŸ’± Usar en Sistema
          </button>
          <button onclick="limpiarHistorialBCV()" style="flex: 1; background: #ff9800; color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1rem;">
            ğŸ—‘ï¸ Limpiar Historial
          </button>
        </div>

        <div style="background: var(--warning-bg); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--warning);">
          <p style="margin: 0; color: var(--warning-text); font-size: 0.85rem;">
            <strong>âš ï¸ Nota:</strong> Las tasas se obtienen directamente del sitio oficial del BCV. 
            Se recomienda verificar la informaciÃ³n en la fuente oficial.
          </p>
        </div>
      </div>

      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius);">
        <h3 style="margin-top: 0; color: var(--text);">ğŸ“Š Historial de Tasas</h3>
        <p style="color: var(--text-light); margin-bottom: 1rem; font-size: 0.85rem;">
          Ãšltimas 7 tasas consultadas para seguimiento:
        </p>
        <div id="historialTasas" style="max-height: 200px; overflow-y: auto;">
          <p style="text-align: center; color: var(--text-light); font-style: italic;">No hay historial aÃºn. Consulta algunas tasas.</p>
        </div>
      </div>
    </section> <!-- CIERRE SECCIÃ“N TASAS BCV -->
  </div>
</div>

<div class="side-content" id="side-config">
  <div class="sidebar-content">
    <section id="panelReglas">

      <div style="text-align: center; margin-bottom: 1.5rem; padding: 1rem; background: var(--card-bg); border-radius: var(--radius); border: 1px solid var(--text-light);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--text);">Sistema de GestiÃ³n Financiera</h3>
        <p style="margin: 0; font-size: 0.875rem; color: var(--text-light);">
            VersiÃ³n <span id="versionConfig" style="font-weight: 600; color: var(--primary);">1.1.2</span>
        </p>
      </div>

      <h2>Ajustes del sistema 
        <button onclick="mostrarAyudaConfiguracion()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo configurar reglas y categorÃ­as?">â“</button>
    </h2>

        <ul id="listaReglas"></ul>

        <!-- âœ… NUEVA SECCIÃ“N: Editar CategorÃ­as -->
  <details>
    <summary>âœï¸ Editar categorÃ­a</summary>
    <ul id="listaCategoriasEditables" style="margin: 0.5rem 0; padding-left: 1rem;"></ul>
    <button onclick="agregarCategoria()" style="margin-top: 0.5rem; width:100%;">â• Nueva categorÃ­a</button>
  </details>

  <!-- âœ… NUEVA SECCIÃ“N: Editar Bancos -->
  <details>
    <summary>âœï¸ Editar banco</summary>
    <ul id="listaBancosEditables" style="margin: 0.5rem 0; padding-left: 1rem;"></ul>
    <button onclick="agregarBanco()" style="margin-top: 0.5rem; width:100%;">â• Nuevo banco</button>
  </details>

        <!-- ELIMINAR CATEGORÃAS -->
        <details>
          <summary>ğŸ—‘ï¸ Eliminar categorÃ­a</summary>
          <select id="selectEliminarCategoria">
            <option value="">Selecciona una categorÃ­a</option>
          </select>
          <button onclick="eliminarCategoria()">Eliminar</button>
        </details>

        <!-- ELIMINAR BANCOS -->
        <details>
          <summary>ğŸ—‘ï¸ Eliminar banco</summary>
          <select id="selectEliminarBanco">
            <option value="">Selecciona un banco</option>
          </select>
          <button onclick="eliminarBanco()">Eliminar</button>
        </details>

        <!-- ELIMINAR SALDO INICIAL -->
        <details>
          <summary>ğŸ—‘ï¸ Eliminar saldo inicial</summary>
          <button onclick="eliminarSaldoInicial()">Eliminar saldo inicial</button>
        </details>

        <!-- NUEVA REGLA -->
        <details>
          <summary>â• Nueva regla</summary>
          <input type="text" id="txtPalabra" placeholder="Palabra clave (ej. netflix)" />
          <input type="text" id="txtCat" placeholder="CategorÃ­a a asignar" />
          <label>Banco objetivo:
            <select id="txtBancoRegla">
              <option value="">Cualquier banco</option>
              <option value="Otro">+ Nuevoâ€¦</option>
            </select>
          </label>
          <input type="text" id="nuevoBancoRegla" placeholder="Nombre del banco" style="display:none;" />
          <button onclick="agregarRegla()">Guardar regla</button>
        </details>

              <!-- BLOQUEO DE SEGURIDAD -->
<details style="margin-top: 1.5rem;">
  <summary>ğŸ”’ Bloqueo de App (PIN)</summary>
  <p style="color: var(--text-light); margin-bottom: 1rem;">Activa un bloqueo con PIN para proteger tu app. Solo tÃº podrÃ¡s acceder.</p>
  <div style="margin-bottom: 1rem;">
    <label><input type="checkbox" id="bloqueoActivo" />Activar bloqueo de app</label>
  </div>

  <div id="bloqueoPINContainer" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--card-bg); border-radius: var(--radius); border: 1px solid var(--text-light);">
    <label for="bloqueoPIN">Ingresa tu PIN de 4 dÃ­gitos:</label>
    <input type="password" id="bloqueoPIN" maxlength="4" minlength="4" placeholder="Ej: 1234" style="width:100%; margin-bottom:0.75rem;" />
    <label for="bloqueoPINConfirmar">Confirma tu PIN:</label>
    <input type="password" id="bloqueoPINConfirmar" maxlength="4" minlength="4" placeholder="Vuelve a ingresar" style="width:100%; margin-bottom:0.75rem;" />

    <!-- Preguntas de Seguridad -->
    <div style="margin-top: 1rem; padding: 1rem; background: var(--bg); border-radius: var(--radius); border: 1px solid var(--border);">
      <h4 style="margin: 0 0 0.75rem 0; color: var(--text);">ğŸ” Preguntas de Seguridad</h4>
      <p style="color: var(--text-light); margin-bottom: 1rem; font-size: 0.9rem;">Establece 2 preguntas de seguridad para recuperar tu acceso si olvidas tu PIN.</p>

      <div style="margin-bottom: 1rem;">
        <label for="preguntaSeguridad1">Pregunta 1:</label>
        <select id="preguntaSeguridad1" style="width:100%; margin-bottom:0.75rem; padding:0.5rem; border:1px solid #ccc; border-radius:6px;">
          <option value="">Selecciona una pregunta</option>
          <option value="nombreMadre">Nombre de tu madre</option>
          <option value="nombrePadre">Nombre de tu padre</option>
          <option value="nombreMascota">Nombre de tu primera mascota</option>
          <option value="ciudadNatal">Ciudad donde naciste</option>
          <option value="mejorAmigo">Nombre de tu mejor amigo/a de la infancia</option>
          <option value="primeraEscuela">Nombre de tu primera escuela</option>
          <option value="comidaFavorita">Tu comida favorita</option>
        </select>
        <input type="text" id="respuestaSeguridad1" placeholder="Respuesta" style="width:100%; margin-bottom:0.75rem; padding:0.5rem; border:1px solid #ccc; border-radius:6px;" />
      </div>

      <div style="margin-bottom: 1rem;">
        <label for="preguntaSeguridad2">Pregunta 2:</label>
        <select id="preguntaSeguridad2" style="width:100%; margin-bottom:0.75rem; padding:0.5rem; border:1px solid #ccc; border-radius:6px;">
          <option value="">Selecciona una pregunta</option>
          <option value="nombreMadre">Nombre de tu madre</option>
          <option value="nombrePadre">Nombre de tu padre</option>
          <option value="nombreMascota">Nombre de tu segunda mascota</option>
          <option value="ciudadNatal">Ciudad donde naciste</option>
          <option value="mejorAmigo">Nombre de tu mejor amigo/a de la infancia</option>
          <option value="primeraEscuela">Nombre de tu primera escuela</option>
          <option value="comidaFavorita">Tu comida favorita</option>
        </select>
        <input type="text" id="respuestaSeguridad2" placeholder="Respuesta" style="width:100%; margin-bottom:0.75rem; padding:0.5rem; border:1px solid #ccc; border-radius:6px;" />
      </div>
    </div>

    <button onclick="guardarPIN()" style="width:100%;">Guardar PIN y Preguntas de Seguridad</button>
    <button onclick="eliminarPIN()" style="width:100%; background:var(--danger); margin-top:0.5rem;">Eliminar PIN</button>
  </div>
  <p style="font-size:0.8rem; color:var(--text-light); margin-top:1rem;">âš ï¸ Si olvidas tu PIN, puedes usar las preguntas de seguridad para recuperar el acceso. <br>Â¡Guarda tus respuestas en un lugar seguro!</p>
</details>

      <!-- COPIA DE SEGURIDAD -->
<details style="margin-top: 1.5rem;">
  <summary>ğŸ’¾ Copia de Seguridad</summary>
  <p style="color: var(--text-light); margin-bottom: 1rem;">
    Exporta o importa tu historial completo. Ideal para cambiar de dispositivo o recuperar datos.
  </p>
  
  <div style="display: flex; gap: 0.75rem; margin-bottom: 1rem;">
    <button onclick="exportarBackup()" style="flex: 1; padding: 1rem; background: #0b57d0; color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
      <span style="font-size: 1.2rem;">ğŸ“¤</span> Exportar
    </button>

    <button onclick="exportarRespaldoTotal()" style="flex: 1; padding: 1rem; background: #0d9488; color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
      <span style="font-size: 1.2rem;">ğŸ›¡ï¸</span> ExportaciÃ³n Total
    </button>

<!-- âœ… BotÃ³n para guardar el backup localmente -->
<button onclick="guardarBackupActual()" style="flex: 1; padding: 1rem; background: #6d28d9; color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
    <span style="font-size: 1.2rem;">ğŸ’¾</span> Guardar
</button>

    <!-- âœ… NUEVO: Campo para nombre personalizado del backup -->
<div style="margin-top: 1rem; display: flex; align-items: center; gap: 0.5rem;">
    <label for="nombreBackup">Nombre del Backup:</label>
    <input type="text" id="nombreBackup" placeholder="Ej: Backup Finanzas Empresa X" style="flex: 1; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;" />
</div>

    <button onclick="importarBackupDesdeDisco()" 
      style="flex: 1; padding: 1rem; background: #018642; color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
      <span style="font-size: 1.2rem;">ğŸ“¥</span> Importar desde Disco
  </button>
  </div>
  
  
  <!-- SecciÃ³n de Backups Guardados -->
  <div style="margin-top: 1.5rem;">
    <h4 style="margin-bottom: 0.75rem; color: var(--text); display: flex; align-items: center; gap: 0.5rem;">
      <span style="font-size: 1.2rem;">ğŸ“‚</span> Backups Guardados
      <button onclick="cargarBackupsGuardados()" style="margin-left: auto; background: none; border: none; color: var(--primary); cursor: pointer; display: flex; align-items: center; gap: 0.25rem; font-size: 0.9rem;">
        <span style="font-size: 1rem;">ğŸ”„</span> Actualizar
      </button>
    </h4>
    
    <div id="listaBackups" style="background: var(--card-bg); border-radius: var(--radius); padding: 1rem; margin-bottom: 1rem; max-height: 300px; overflow-y: auto; border: 1px solid var(--border-color);">
      <p style="text-align: center; color: var(--text-light);">Cargando backups guardados...</p>
    </div>
    
    <p style="font-size: 0.8rem; color: var(--text-light); margin-top: 0.5rem; text-align: center;">
      Los backups se guardan localmente en tu navegador.
    </p>
  </div>

  <button onclick="repararApp()" style="width:100%; padding:1rem; margin-top:1.5rem; background:#ff9800; color:white; border:none; border-radius:8px; font-size:1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
    <span style="font-size: 1.2rem;">ğŸ› ï¸</span> Reparar VisualizaciÃ³n (Firefox/Chrome)
  </button>
</details>

  <!-- MODO DE ENTRADA -->
  <details style="margin-top: 1.5rem;">
  <summary>ğŸ”¢ Modo de Entrada de NÃºmeros</summary>
  <p style="color: var(--text-light); margin-bottom: 1rem;">
    Elige cÃ³mo deseas ingresar cantidades en los campos de "Cantidad" y "Saldo Inicial".
  </p>
  <div style="margin-bottom: 1rem;">
    <label>
      <input type="radio" name="numeroModo" value="automatico" id="modoAutomatico" checked />
      <strong>âœ… AutomÃ¡tico (recomendado)</strong><br>
      <small>El sistema convierte automÃ¡ticamente: <code>110.88</code> â†’ <code>11.088,00</code></small>
    </label>
  </div>
  <div style="margin-bottom: 1rem;">
    <label>
      <input type="radio" name="numeroModo" value="literal" id="modoLiteral" />
      <strong>ğŸ“ Literal (ingresa tal cual)</strong><br>
      <small>Guarda exactamente lo que escribas: <code>110.88</code> â†’ <code>110.88</code> (sin formateo)</small>
    </label>
  </div>
  <p style="font-size:0.8rem; color:var(--text-light); margin-top:0.75rem;">
    âš ï¸ En modo literal, no se aplicarÃ¡ formateo ni validaciÃ³n automÃ¡tica.  
    AsegÃºrate de usar solo puntos (.) como separador decimal, y no comas (,).
  </p>
</details>

  <!-- CONTROL DE SONIDOS -->
  <details style="margin-top: 1.5rem;">
    <summary>ğŸ”Š Control de Sonidos</summary>
    <p style="color: var(--text-light); margin-bottom: 1rem;">
      Activa o desactiva los sonidos que se reproducen al cambiar de pestaÃ±as. Puedes cambiar esta opciÃ³n en cualquier momento.
    </p>
    <div style="margin-bottom: 1rem;">
      <label>
        <input type="checkbox" id="sonidosActivados" checked />
        <strong>ğŸ”Š Sonidos activados</strong><br>
        <small style="color: var(--text-light);">Reproduce sonidos sutiles al cambiar entre pestaÃ±as</small>
      </label>
    </div>
    <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
      <button onclick="probarSonido()" style="flex: 1; background: #0b57d0; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 0.9rem;">ğŸ”Š Probar sonido</button>
      <button onclick="guardarConfiguracionSonidos()" style="flex: 1; background: #018642; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 0.9rem;">ğŸ’¾ Guardar</button>
    </div>
    <p style="font-size:0.8rem; color:var(--text-light); margin-top:1rem;">
      ğŸ’¡ Los sonidos usan la Web Audio API de tu navegador y no requieren archivos externos.
    </p>
  </details>
  
  <!-- ELIMINAR TODOS LOS MOVIMIENTOS -->
  <details style="margin-top: 1.5rem; color: #b00020;">
  <summary style="color: #b00020;">âš ï¸ Eliminar todos los movimientos</summary>
  <p style="font-size:0.85rem; color:var(--text-light); margin-bottom:0.75rem;">
    âš ï¸ Â¡ADVERTENCIA! Esto eliminarÃ¡ TODOS tus movimientos (ingresos, gastos, saldos iniciales).  
    Esto NO borra tus categorÃ­as, bancos, reglas, tasa o backup.  
    Solo los movimientos.
  </p>
  <button onclick="eliminarTodosLosMovimientos()" style="width:100%; padding:1rem; background:#b00020; color:white; border:none; border-radius:8px; font-size:1rem;">
    ğŸ—‘ï¸ Eliminar TODOS los movimientos
  </button>
</details>

</section>
</div> <!-- cierre sidebar-content CONFIGURACIÃ“N -->
</div>


<!-- âœ… NUEVA PESTAÃ‘A: AHORRO -->
<div class="side-content" id="side-ahorro">
  <div class="sidebar-content">
    <section>
      <h2>ğŸ¯ Mis Metas de Ahorro
        <button onclick="mostrarAyudaAhorro()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo funciona esta pestaÃ±a?">â“</button>
      </h2>
      
      <!-- FORMULARIO PARA NUEVA META -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
        <h3 style="margin-top: 0; color: var(--primary);">â• Nueva Meta</h3>
        <input type="text" id="nombreMeta" placeholder="Ej: Vacaciones en la playa 2025" 
               style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />
        <input type="text" id="montoMeta" placeholder="Ej: 50000" 
               style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />
        <input type="date" id="fechaMeta" 
               style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />
        <button onclick="crearMetaAhorro()" 
                style="width: 100%; background: #10B981; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">
          ğŸ’¾ Crear Meta
        </button>
      </div>

      <!-- LISTA DE METAS -->
      <div id="listaMetasAhorro">
        <!-- Las metas se cargarÃ¡n aquÃ­ -->
      </div>

      <!-- GRÃFICO TERMÃ“METRO -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-top: 2rem;">
        <h3>ğŸ“Š Progreso General</h3>
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
          <div style="flex: 1;">
            <div style="height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden; margin-bottom: 0.5rem;">
              <div id="barraProgresoGeneral" style="height: 100%; width: 0%; background: linear-gradient(90deg, #10B981, #059669); transition: width 0.5s ease;"></div>
            </div>
            <div style="font-size: 0.8rem; color: var(--text-light);">
              <span id="textoProgresoGeneral">Bs. 0 / Bs. 0 (0%)</span>
            </div>
          </div>
          <div style="font-size: 2rem;">ğŸŒ¡ï¸</div>
        </div>
      </div>

      <!-- SUGERENCIAS AUTOMÃTICAS -->
      <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.5rem; border-radius: var(--radius); margin-top: 2rem; color: white;">
        <h3 style="margin-top: 0;">ğŸ’¡ Sugerencias de Ahorro</h3>
        <div id="sugerenciasContainer">
          <p style="margin: 0; font-style: italic;">Cargando sugerencias...</p>
        </div>
        <button onclick="generarNuevasSugerencias()" 
                style="margin-top: 1rem; background: rgba(255,255,255,0.2); color: white; border: none; border-radius: 6px; padding: 0.5rem 1rem; font-size: 0.9rem;">
          ğŸ”„ Generar Nuevas
        </button>
      </div>
    </section> <!-- Fin secciÃ³n Ahorro -->
  </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: OPTIMIZACIÃ“N FISCAL -->
<div class="side-content" id="side-optimizacion-fiscal">
  <div class="sidebar-content">
    <section>
      <h2>ğŸ’° OptimizaciÃ³n Fiscal Simplificada
        <button onclick="mostrarAyudaOptimizacionFiscal()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo funciona la optimizaciÃ³n fiscal?">â“</button>
      </h2>
      <p style="color: var(--text-light); margin-bottom: 1.5rem;">
        Maximiza beneficios fiscales dentro del marco legal con herramientas profesionales automÃ¡ticas.
      </p>

      <!-- CLASIFICADOR AUTOMÃTICO DE GASTOS DEDUCIBLES -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
        <h3>ğŸ” Clasificador AutomÃ¡tico de Gastos Deducibles</h3>
        <p style="color: var(--text-light); margin-bottom: 1rem;">
          Analiza automÃ¡ticamente tus movimientos para identificar gastos potencialmente deducibles.
        </p>
        <button onclick="clasificarGastosDeducibles()" 
                style="background: #059669; color: white; border: none; border-radius: 8px; padding: 0.75rem 1.5rem; font-size: 1rem; cursor: pointer;">
          ğŸ” Analizar Movimientos
        </button>
        <div id="resultadoClasificacion" style="margin-top: 1rem; display: none;">
          <div style="background: var(--success-bg); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--success);">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--success-text);">ğŸ“Š Resultados del AnÃ¡lisis</h4>
            <div id="resumenDeducibles" style="font-size: 0.9rem; color: var(--success-text);"></div>
          </div>
        </div>
      </div>

      <!-- SIMULADOR DE ESCENARIOS FISCALES -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
        <h3>ğŸ“Š Simulador de Escenarios Fiscales</h3>
        <p style="color: var(--text-light); margin-bottom: 1rem;">
          Simula diferentes escenarios fiscales para optimizar tu estrategia tributaria.
        </p>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div>
            <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">Ingresos Anuales Proyectados (Bs):</label>
            <input type="text" id="ingresosProyectados" placeholder="Ej: 500000" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 6px;">
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">Gastos Deducibles Proyectados (Bs):</label>
            <input type="text" id="gastosDeduciblesProyectados" placeholder="Ej: 150000" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 6px;">
          </div>
        </div>

        <button onclick="simularEscenarioFiscal()" 
                style="width: 100%; background: #0b57d0; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem; cursor: pointer;">
          ğŸ“Š Simular Escenario
        </button>

        <div id="resultadoSimulacion" style="margin-top: 1rem; display: none;">
          <div style="background: var(--primary-bg); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--primary);">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--primary);">ğŸ“ˆ Resultado de SimulaciÃ³n</h4>
            <div id="detalleSimulacion" style="font-size: 0.9rem; color: var(--text);"></div>
          </div>
        </div>
      </div>

      <!-- PROYECCIÃ“N DE IMPUESTO ANUAL -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
        <h3>ğŸ“ˆ ProyecciÃ³n de Impuesto Anual</h3>
        <p style="color: var(--text-light); margin-bottom: 1rem;">
          Proyecta tu impuesto anual basado en tendencias actuales de ingresos y gastos.
        </p>
        <button onclick="proyectarImpuestoAnual()" 
                style="background: #ff9800; color: white; border: none; border-radius: 8px; padding: 0.75rem 1.5rem; font-size: 1rem; cursor: pointer;">
          ğŸ“Š Calcular ProyecciÃ³n
        </button>
        <div id="resultadoProyeccion" style="margin-top: 1rem; display: none;">
          <div style="background: var(--warning-bg); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--warning);">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--warning-text);">ğŸ’° ProyecciÃ³n Anual Estimada</h4>
            <div id="detalleProyeccion" style="font-size: 0.9rem; color: var(--warning-text);"></div>
          </div>
        </div>
      </div>

      <!-- OPTIMIZACIÃ“N DE DEDUCCIONES -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
        <h3>ğŸ¯ OptimizaciÃ³n de Deducciones</h3>
        <p style="color: var(--text-light); margin-bottom: 1rem;">
          Identifica oportunidades para maximizar deducciones fiscales legales.
        </p>
        <button onclick="optimizarDeducciones()" 
                style="background: #8B5CF6; color: white; border: none; border-radius: 8px; padding: 0.75rem 1.5rem; font-size: 1rem; cursor: pointer;">
          ğŸ¯ Optimizar Deducciones
        </button>
        <div id="resultadoOptimizacion" style="margin-top: 1rem; display: none;">
          <div style="background: var(--secondary-bg); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--secondary);">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--secondary);">ğŸ’¡ Oportunidades de OptimizaciÃ³n</h4>
            <div id="detalleOptimizacion" style="font-size: 0.9rem; color: var(--text);"></div>
          </div>
        </div>
      </div>

      <!-- RECOMENDACIONES DE TIMING -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
        <h3>â° Recomendaciones de Timing de Gastos</h3>
        <p style="color: var(--text-light); margin-bottom: 1rem;">
          Sugerencias sobre cuÃ¡ndo realizar gastos para maximizar beneficios fiscales.
        </p>
        <button onclick="generarRecomendacionesTiming()" 
                style="background: #10B981; color: white; border: none; border-radius: 8px; padding: 0.75rem 1.5rem; font-size: 1rem; cursor: pointer;">
          â° Generar Recomendaciones
        </button>
        <div id="resultadoTiming" style="margin-top: 1rem; display: none;">
          <div style="background: var(--info-bg); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--info);">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--info-text);">ğŸ“… Recomendaciones de Timing</h4>
            <div id="detalleTiming" style="font-size: 0.9rem; color: var(--info-text);"></div>
          </div>
        </div>
      </div>
    </section> <!-- Fin secciÃ³n OptimizaciÃ³n Fiscal -->
  </div>
</div>

<!-- ======= PESTAÃ‘A: RECORDATORIOS ======= -->
<div class="side-content" id="side-recordatorios">
  <div class="sidebar-content">
    <section>
      <h2>â° Recordatorios
        <button onclick="mostrarAyudaRecordatorios()"
                style="background:none;border:none;color:var(--primary);font-size:1rem;cursor:pointer;margin-left:0.5rem;padding:0.25rem;border-radius:50%;"
                title="Â¿CÃ³mo funcionan los recordatorios?">â“</button>
      </h2>
      <p style="color:var(--text-light);margin-bottom:1.5rem;">
        Gestiona avisos automÃ¡ticos para vencimientos, metas o cualquier evento.  
        <strong>AnticipaciÃ³n por defecto: 5 dÃ­as</strong> (personalizable).
      </p>

      <!-- Formulario nuevo recordatorio -->
      <div style="background:var(--card-bg);padding:1.5rem;border-radius:var(--radius);margin-bottom:1.5rem;">
        <h3 style="margin-top:0;">â• Nuevo Recordatorio</h3>
        <input type="text" id="tituloRecordatorio" placeholder="TÃ­tulo (ej: Pago del mantenimiento)" 
               style="width:100%;margin-bottom:1rem;padding:0.75rem;border:1px solid #ccc;border-radius:8px;">
        <textarea id="descripcionRecordatorio" placeholder="DescripciÃ³n opcional..." rows="2"
                  style="width:100%;margin-bottom:1rem;padding:0.75rem;border:1px solid #ccc;border-radius:8px;resize:vertical;"></textarea>
        <label>Fecha lÃ­mite:
          <input type="date" id="fechaRecordatorio" style="width:100%;padding:0.75rem;border:1px solid #ccc;border-radius:8px;">
        </label>
        <label style="margin-top:1rem;display:block;">
          AnticipaciÃ³n (dÃ­as):
          <input type="number" id="diasAnticipacion" value="5" min="1" max="365"
                 style="width:100%;padding:0.75rem;border:1px solid #ccc;border-radius:8px;">
        </label>
        
        <!-- Nuevo campo para repeticiÃ³n en el mismo dÃ­a -->
        <label style="margin-top:1rem;display:block;">
          <input type="checkbox" id="repetirMismoDia" onchange="toggleRepeticionMismoDia()"
                 style="transform:scale(1.2);accent-color:var(--primary);margin-right:0.5rem;">
          Repetir aviso en el mismo dÃ­a cada:
        </label>
        <div id="intervaloRepeticionContainer" style="margin-top:0.5rem;margin-left:1.5rem;display:none;">
          <input type="number" id="intervaloMinutos" value="30" min="1" max="1440" 
                 placeholder="Minutos"
                 style="width:100%;padding:0.75rem;border:1px solid #ccc;border-radius:8px;">
          <small style="color:var(--text-light);display:block;margin-top:0.25rem;">
            El aviso se repetirÃ¡ cada X minutos todos los dÃ­as dentro del rango de anticipaciÃ³n
          </small>
        </div>
        
        <button onclick="guardarRecordatorio()" 
                style="width:100%;margin-top:1rem;background:var(--primary);color:white;border:none;border-radius:8px;padding:0.75rem;">Guardar</button>

        <label style="margin-top:1rem;display:block;">
  Prioridad:
  <select id="prioridadRecordatorio" style="width:100%;padding:0.75rem;border:1px solid #ccc;border-radius:8px;">
    <option value="baja">Baja</option>
    <option value="media" selected>Media</option>
    <option value="alta">Alta</option>
  </select>
</label>

<label style="margin-top:1rem;display:block;">
  RepeticiÃ³n:
  <select id="repeticionRecordatorio" style="width:100%;padding:0.75rem;border:1px solid #ccc;border-radius:8px;">
    <option value="ninguna" selected>No repetir</option>
    <option value="diaria">Diaria</option>
    <option value="semanal">Semanal</option>
    <option value="mensual">Mensual</option>
  </select>
</label>
      </div>

<!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>      
      <!-- âš™ï¸ ConfiguraciÃ³n global -->
<details style="margin-bottom:1.5rem;">
  <summary>âš™ï¸ ConfiguraciÃ³n global</summary>

  <div style="padding:1rem;background:var(--card-bg);border-radius:var(--radius);display:flex;flex-direction:column;gap:1rem;">
    
    <!-- ğŸ”” Sonido de aviso -->
    <section id="configSonido">
      <h5 style="margin-top:0;">ğŸ”” Sonido de aviso</h5>

      <label for="selectSonido">Elegir sonido:</label>
      <select id="selectSonido" style="margin-top:0.3rem;">
        <option value="default">Predeterminado</option>
        <option value="chime">Campanita</option>
        <option value="alert">Alerta breve</option>
        <option value="none">Silencio</option>
      </select>

      <div style="margin-top:0.6rem;">
        <label for="uploadSonido">O subir un sonido personalizado (.mp3 o .wav):</label>
        <input type="file" id="uploadSonido" accept="audio/*" style="margin-top:0.3rem;">
      </div>

      <button id="btnProbarSonido"
              style="margin-top:0.7rem;background:var(--info);color:white;border:none;border-radius:6px;padding:0.4rem 0.8rem;">
        â–¶ï¸ Probar sonido
      </button>
    </section>

    <!-- ğŸ•“ ConfiguraciÃ³n visual / avisos -->
<section id="configVisual">
  <h5 style="margin-top:1rem; margin-bottom:0.5rem;">ğŸ‘ï¸ Preferencias de avisos</h5>
  
  <div style="display:flex;flex-direction:column;gap:0.6rem;margin-top:0.3rem;">
    <label style="display:flex;align-items:center;gap:0.6rem;cursor:pointer;">
      <input type="checkbox" id="mostrarToast" checked onchange="toggleAvisosVisuales()" 
             style="transform:scale(1.2);accent-color:var(--info);">
      <span>Mostrar notificaciones visuales (toasts)</span>
    </label>

    <label style="display:flex;align-items:center;gap:0.6rem;cursor:pointer;">
      <input type="checkbox" id="mostrarVencidos" checked onchange="toggleVencidos()" 
             style="transform:scale(1.2);accent-color:var(--warning);">
      <span>Mostrar recordatorios vencidos en la lista</span>
    </label>
  </div>

  <div style="display:flex;flex-direction:column;gap:0.3rem;margin-top:0.8rem;">
  <label for="modoAvisoDiario" style="font-weight:500;">ğŸ” Modo de recordatorio:</label>
  <select id="modoAvisoDiario" onchange="guardarModoAvisoDiario()" style="padding:0.3rem;border-radius:6px;">
    <option value="unico">Avisar una sola vez</option>
    <option value="repetido">Recordar cada dÃ­a hasta la fecha lÃ­mite</option>
  </select>
</div>

</section>


    <!-- ğŸ’¾ BotÃ³n de respaldo opcional -->
    <section id="configBackup">
      <h5 style="margin-top:1rem;">ğŸ’¾ Respaldo y restauraciÃ³n</h5>
      <button onclick="exportarRecordatorios()" 
              style="background:var(--success);color:white;border:none;border-radius:6px;padding:0.4rem 0.8rem;">
        Exportar recordatorios
      </button>
      <input type="file" id="importarArchivo" accept=".json" onchange="importarRecordatorios(this)" 
             style="margin-top:0.5rem;">
    </section>

  </div>
</details>

<!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>

      <!-- Listado de recordatorios -->
      <div id="listaRecordatorios" style="margin-bottom:1.5rem;">
        <!-- Se llena dinÃ¡micamente -->
      </div>

      <!-- PrÃ³ximos avisos -->
      <div id="proximosAvisos" style="margin-bottom:1.5rem;">
        <h3>ğŸ“¬ PrÃ³ximos avisos</h3>
        <ul id="ulProximosAvisos"></ul>
      </div>
    </section> <!-- CIERRE DE SECCIÃ“N RECORDATORIOS -->
  </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: NOTAS -->
<div class="side-content" id="side-notas">
    <div class="sidebar-content">
        <section>
            <h2>ğŸ“ Notas<button onclick="mostrarAyudaNotas()" style="background:none;border:none;color:var(--primary);font-size:1rem;cursor:pointer;margin-left:0.5rem;padding:0.25rem;border-radius:50%;" title="Â¿CÃ³mo usar las notas?">â“</button></h2>
            <p style="color:var(--text-light);margin-bottom:1.5rem;">Escribe y guarda tus ideas, recordatorios o cualquier informaciÃ³n importante.</p>

            <!-- Formulario para agregar/editar notas -->
            <div id="formularioNota" style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
                <input type="hidden" id="idNotaEditando" value="">
                <label for="tituloNota">TÃ­tulo:</label>
                <input type="text" id="tituloNota" placeholder="Ej: Ideas para el presupuesto" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="contenidoNota">Contenido:</label>
                <textarea id="contenidoNota" placeholder="Escribe aquÃ­ tu nota..." style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem; min-height:150px; resize:vertical;"></textarea>
                <div style="display: flex; gap: 0.75rem;">
                    <button onclick="guardarNota()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ’¾ Guardar Nota</button>
                    <button onclick="limpiarFormularioNota()" style="flex:1; background:#6b7280; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ—‘ï¸ Limpiar</button>
                </div>
            </div>

            <!-- Lista de notas -->
            <div id="listaNotas" style="margin-top:1.5rem;">
                <h3>ğŸ“‹ Tus Notas</h3>
                <div id="contenedorNotas" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
                    <!-- Las notas se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
                </div>
                <div id="mensajeSinNotas" style="text-align: center; padding: 2rem; color: var(--text-light); display: none;">
                    <p>ğŸ“­ No tienes notas aÃºn.</p>
                    <p>Escribe algo en el formulario de arriba para empezar.</p>
                </div>
            </div>
        </section> <!-- Cierre de la secciÃ³n de Notas -->
    </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: PRESUPUESTO SUGERIDO -->
<div class="side-content" id="side-presupuesto-sugerido">
  <div class="sidebar-content">
    <section>
      <h2>ğŸ’° Presupuesto Sugerido
        <button onclick="mostrarAyudaPresupuestoSugerido()"
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo funciona el presupuesto sugerido?">â“</button>
      </h2>
      <p style="color: var(--text-light); margin-bottom: 1.5rem;">
        Basado en tu historial de gastos, te sugerimos un presupuesto mensual inteligente que te ayude a cubrir todos tus gastos con Ã©xito.
      </p>

      <!-- âœ… BOTÃ“N PARA GENERAR PRESUPUESTO SUGERIDO -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem; border-left: 4px solid var(--primary);">
        <h3 style="margin-top: 0; color: var(--primary);">ğŸ¯ Generar Presupuesto Sugerido</h3>
        <p style="color: var(--text-light); margin-bottom: 1.5rem; font-size: 0.9rem;">
          Analizaremos tus gastos histÃ³ricos y te sugeriremos un presupuesto mensual optimizado.
        </p>
        <button onclick="generarPresupuestoSugerido()" id="btnGenerarPresupuesto"
                style="width: 100%; background: var(--primary); color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1rem; cursor: pointer; transition: background 0.2s;">
          ğŸ”„ Generar Presupuesto Sugerido
        </button>
      </div>

      <!-- âœ… RESULTADOS DEL PRESUPUESTO SUGERIDO -->
      <div id="resultadosPresupuesto" style="display: none;">
        <!-- Resumen Ejecutivo -->
        <div style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
          <h3 style="margin-top: 0; display: flex; align-items: center; gap: 0.5rem;">
            ğŸ“Š Resumen Ejecutivo
          </h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
            <div style="text-align: center;">
              <div style="font-size: 1.5rem; font-weight: bold; color: #10B981;">ğŸ’°</div>
              <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem; opacity: 0.9;">Gasto Promedio Mensual</p>
              <p style="font-size: 1.2rem; font-weight: bold;" id="gastoPromedioMensual">Bs. 0,00</p>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.5rem; font-weight: bold; color: #F59E0B;">ğŸ“ˆ</div>
              <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem; opacity: 0.9;">Presupuesto Sugerido</p>
              <p style="font-size: 1.2rem; font-weight: bold;" id="presupuestoSugerido">Bs. 0,00</p>
            </div>
          </div>
        </div>

        <!-- âœ… ANÃLISIS DETALLADO POR CATEGORÃAS -->
        <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
          <h3 style="margin-top: 0; color: var(--text);">ğŸ“‹ AnÃ¡lisis por CategorÃ­as</h3>
          <div id="analisisCategorias">
            <!-- Las categorÃ­as se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
          </div>
        </div>

        <!-- âœ… ACCIONES RECOMENDADAS -->
        <div style="background: var(--success-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem; border-left: 4px solid var(--success);">
          <h3 style="margin-top: 0; color: var(--success-text);">âœ… Acciones Recomendadas</h3>
          <div id="accionesRecomendadas">
            <!-- Las acciones se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
          </div>
        </div>

        <!-- âœ… BOTONES DE ACCIÃ“N -->
        <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
          <button onclick="aplicarPresupuestoSugerido()" id="btnAplicarPresupuesto"
                  style="flex: 1; background: var(--success); color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1rem; cursor: pointer; transition: background 0.2s;">
            âœ… Aplicar como Meta
          </button>
          <button onclick="exportarPresupuestoSugerido()" id="btnExportarPresupuesto"
                  style="flex: 1; background: var(--info); color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1rem; cursor: pointer; transition: background 0.2s;">
            ğŸ“„ Exportar PDF
          </button>
        </div>

        <!-- âœ… AJUSTES MANUALES -->
        <div style="background: var(--warning-bg); padding: 1.5rem; border-radius: var(--radius); border-left: 4px solid var(--warning);">
          <h3 style="margin-top: 0; color: var(--warning-text);">âš™ï¸ Ajustes Manuales</h3>
          <p style="color: var(--warning-text); margin-bottom: 1rem; font-size: 0.9rem;">
            Â¿No te convence alguna sugerencia? Ajusta manualmente las categorÃ­as:
          </p>
          <div id="ajustesCategorias">
            <!-- Los controles de ajuste se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
          </div>
          <button onclick="guardarAjustesPresupuesto()" id="btnGuardarAjustes"
                  style="width: 100%; background: var(--warning); color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 0.9rem; cursor: pointer; margin-top: 1rem;">
            ğŸ’¾ Guardar Ajustes
          </button>
        </div>
      </div>

      <!-- âœ… ESTADO SIN DATOS -->
      <div id="estadoSinDatos" style="text-align: center; padding: 3rem 1rem; color: var(--text-light);">
        <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“Š</div>
        <h3 style="color: var(--text); margin-bottom: 1rem;">Sin datos suficientes</h3>
        <p style="margin-bottom: 2rem;">
          Necesitamos al menos 3 meses de datos de gastos para generar un presupuesto sugerido inteligente.
        </p>
        <p style="font-size: 0.9rem; color: var(--text-light);">
          ğŸ’¡ <strong>Consejo:</strong> Agrega mÃ¡s movimientos histÃ³ricos para obtener mejores sugerencias.
        </p>
      </div>

            <!-- âœ… SECCIÃ“N DE CONFIGURACIÃ“N PERMANENTE -->
            <div id="seccionConfiguracionPermanente" style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--text-light);">
              <h3 style="margin-top: 0; color: var(--primary);">âš™ï¸ ConfiguraciÃ³n del AnÃ¡lisis</h3>
              <p style="color: var(--text-light); margin-bottom: 1rem; font-size: 0.9rem;">
                Personaliza cÃ³mo funciona el anÃ¡lisis de presupuesto sugerido.
              </p>
      
              <div style="margin-bottom: 1.5rem;">
                <h4 style="margin: 0 0 0.5rem 0; color: var(--text);">ğŸ”§ ConfiguraciÃ³n Personal</h4>
                
                <div style="margin-bottom: 1rem;">
                  <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                    Meses mÃ­nimos requeridos:
                    <select id="selectMesesMinimosConfig" style="margin-left: 0.5rem; padding: 0.25rem; border-radius: 4px;">
                      <option value="3">3 meses (recomendado)</option>
                      <option value="2">2 meses</option>
                      <option value="1">1 mes</option>
                    </select>
                  </label>
                </div>
      
                <div style="margin-bottom: 1rem;">
                  <label style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="checkExcepcionesConfig">
                    <span>Permitir excepciones (generar con menos datos si es necesario)</span>
                  </label>
                </div>
              </div>
      
              <div style="display: flex; gap: 1rem;">
                <button onclick="aplicarConfiguracion()" 
                        style="flex: 1; background: var(--success); color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1rem;">
                  ğŸ’¾ Aplicar ConfiguraciÃ³n
                </button>
                <button onclick="restaurarConfiguracionPredeterminada()" 
                        style="flex: 1; background: var(--info); color: white; border: none; border-radius: 8px; padding: 1rem; font-size: 1rem;">
                  ğŸ”„ Restaurar Predeterminados
                </button>
              </div>
            </div>

    </section> <!-- CIERRE DE LA SECCIÃ“N PRESUPUESTO SUGERIDO -->
  </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: PROVEEDORES Y PAGOS -->
<div class="side-content" id="side-proveedores-pagos">
    <div class="sidebar-content">
        <section id="registroProveedor">
            <h2>â• Registrar Nuevo Pago<button onclick="mostrarAyudaProveedores()"
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo gestionar proveedores y pagos?">â“</button></h2>
            <p style="color: var(--text-light); margin-bottom: 1.5rem;">Registra los pagos que haces a tus proveedores, contratistas o servicios recurrentes.</p>

            <!-- Formulario para registrar un nuevo pago -->
            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
                <input type="hidden" id="idPagoEditando" value="">
                <label for="nombreProveedor">Nombre del Proveedor:</label>
                <input type="text" id="nombreProveedor" placeholder="Ej: Juan PÃ©rez - Servicios IT" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="montoPago">Monto (Bs):</label>
                <input type="text" id="montoPago" placeholder="Ej: 5.000,00" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="fechaPago">Fecha de Pago:</label>
                <input type="date" id="fechaPago" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="metodoPago">MÃ©todo de Pago:</label>
                <select id="metodoPago" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;">
                    <option value="">Selecciona un mÃ©todo</option>
                    <option value="transferencia">Transferencia Bancaria</option>
                    <option value="pago mÃ³vil">Otro</option>
                    <option value="efectivo">Efectivo</option>
                    <option value="tarjeta">Tarjeta de CrÃ©dito/DÃ©bito</option>
                    <option value="cheque">Cheque</option>
                    <option value="otro">Otro</option>
                </select>
                <label for="estadoPago">Estado:</label>
                <select id="estadoPago" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;">
                    <option value="pendiente">Pendiente</option>
                    <option value="pagado">Pagado</option>
                </select>
                <label for="descripcionPago">DescripciÃ³n (opcional):</label>
                <textarea id="descripcionPago" placeholder="Detalles del servicio o contrato..." style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem; min-height:80px; resize:vertical;"></textarea>
                <div style="display: flex; gap: 0.75rem;">
                    <button onclick="guardarPago()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ’¾ Guardar Pago</button>
                    <button onclick="limpiarFormularioPago()" style="flex:1; background:#6b7280; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ§¹ Limpiar</button>
                </div>
            </div>
        </section>

        <section id="listaPagos">
            <h2>ğŸ“‹ Mis Pagos</h2>
            <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                <select id="filtroEstadoPago" style="padding:0.5rem; border:1px solid #ccc; border-radius:6px; flex:1;">
                    <option value="">Todos los estados</option>
                    <option value="pendiente">Pendientes</option>
                    <option value="pagado">Pagados</option>
                </select>
                <select id="filtroProveedor" style="padding:0.5rem; border:1px solid #ccc; border-radius:6px; flex:1;">
                    <option value="">Todos los proveedores</option>
                    <!-- Las opciones se cargarÃ¡n dinÃ¡micamente -->
                </select>
            </div>
            <div id="contenedorPagos" style="margin-top:1rem;">
                <!-- Los pagos se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
                <p style="text-align: center; color: var(--text-light);">No hay pagos registrados aÃºn.</p>
            </div>
        </section>

        <section id="graficoGastosProveedores">
            <h2>ğŸ“Š Gasto por Proveedor</h2>
            <canvas id="graficoProveedores" style="max-width:100%; height:auto;"></canvas>
        </section> <!-- CIERRE DE LA SECCIÃ“N PROVEEDORES Y PAGOS -->
    </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: INVENTARIO / ACTIVOS -->
<div class="side-content" id="side-inventario-activos">
    <div class="sidebar-content">
        <section id="registroActivo">
            <h2>â• Registrar Nuevo Activo<button onclick="mostrarAyudaInventario()"
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo gestionar inventario y activos?">â“</button></h2>
            <p style="color: var(--text-light); margin-bottom: 1.5rem;">Registra equipos, herramientas o cualquier activo con valor contable.</p>

            <!-- Formulario para registrar un nuevo activo -->
            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
                <input type="hidden" id="idActivoEditando" value="">
                <label for="nombreActivo">Nombre del Activo:</label>
                <input type="text" id="nombreActivo" placeholder="Ej: Computadora PortÃ¡til Dell" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="valorActivo">Valor Inicial (Bs):</label>
                <input type="text" id="valorActivo" placeholder="Ej: 10.000,00" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="fechaCompra">Fecha de Compra:</label>
                <input type="date" id="fechaCompra" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="depreciacionEstimada">DepreciaciÃ³n Estimada (% anual):</label>
                <input type="number" id="depreciacionEstimada" placeholder="Ej: 10" min="0" max="100" step="0.01" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="descripcionActivo">DescripciÃ³n (opcional):</label>
                <textarea id="descripcionActivo" placeholder="Detalles del activo, modelo, serial, etc." style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem; min-height:80px; resize:vertical;"></textarea>
                <label for="categoriaActivo">CategorÃ­a (opcional):</label>
                <input type="text" id="categoriaActivo" placeholder="Ej: Equipos de Oficina, Herramientas, VehÃ­culos" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <div style="display: flex; gap: 0.75rem;">
                    <button onclick="guardarActivo()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ’¾ Guardar Activo</button>
                    <button onclick="limpiarFormularioActivo()" style="flex:1; background:#6b7280; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ§¹ Limpiar</button>
                </div>
            </div>
        </section>

        <section id="listaActivos">
            <h2>ğŸ“‹ Mis Activos</h2>
            <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                <select id="filtroEstadoActivo" style="padding:0.5rem; border:1px solid #ccc; border-radius:6px; flex:1;">
                    <option value="">Todos los estados</option>
                    <option value="activo">Activo</option>
                    <option value="depreciado">Depreciado</option>
                    <option value="vendido">Vendido</option>
                </select>
                <select id="filtroCategoriaActivo" style="padding:0.5rem; border:1px solid #ccc; border-radius:6px; flex:1;">
                    <option value="">Todas las categorÃ­as</option>
                    <!-- Las opciones se cargarÃ¡n dinÃ¡micamente -->
                </select>
            </div>
            <div id="contenedorActivos" style="margin-top:1rem;">
                <!-- Los activos se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
                <p style="text-align: center; color: var(--text-light);">No hay activos registrados aÃºn.</p>
            </div>
        </section>

        <section id="exportarInventario">
            <h2>ğŸ“„ Exportar Inventario</h2>
            <div style="display: flex; gap: 0.75rem; margin-bottom: 1rem;">
                <button onclick="exportarInventarioExcel()" style="flex:1; background:var(--success); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ“Š Exportar Excel</button>
                <button onclick="exportarInventarioPDF()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ“„ Exportar PDF</button>
            </div>
        </section> <!-- Cierre de la secciÃ³n Inventario y activos -->
    </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: REPORTES GERENCIALES -->
<div class="side-content" id="side-reportes-gerenciales">
    <div class="sidebar-content">
        <section id="filtroReporte">
            <h2>âš™ï¸ Configurar Reporte<button onclick="mostrarAyudaReportes()"
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo configurar los reportes gerenciales?">â“</button></h2>
            <p style="color: var(--text-light); margin-bottom: 1.5rem;">Selecciona el perÃ­odo y las mÃ©tricas que deseas incluir en tu reporte.</p>

            <!-- Formulario para configurar el reporte -->
            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
                <label for="periodoReporte">PerÃ­odo:</label>
                <select id="periodoReporte" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;">
                    <option value="mensual">Mensual</option>
                    <option value="trimestral">Trimestral</option>
                    <option value="anual">Anual</option>
                </select>
                <label for="fechaInicioReporte">Fecha de Inicio:</label>
                <input type="date" id="fechaInicioReporte" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="fechaFinReporte">Fecha de Fin:</label>
                <input type="date" id="fechaFinReporte" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="metricasReporte">MÃ©tricas a incluir:</label>
                <select id="metricasReporte" multiple style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem; height: 100px;">
                    <option value="ingresosGastos" selected>Ingresos vs Gastos</option>
                    <option value="topCategorias" selected>Top CategorÃ­as</option>
                    <option value="rentabilidad" selected>Rentabilidad</option>
                    <option value="comparativaMensual" selected>Comparativa Mensual</option>
                </select>
                <div style="display: flex; gap: 0.75rem;">
                    <button onclick="generarReporteGerencial()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ“Š Generar Reporte</button>
                    <button onclick="limpiarConfiguracionReporte()" style="flex:1; background:#6b7280; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ§¹ Limpiar</button>
                </div>
            </div>
        </section>

        <section id="contenidoReporte" style="display: none;">
            <h2>ğŸ“ˆ Resultados del Reporte</h2>
            <!-- AquÃ­ se mostrarÃ¡ el contenido del reporte generado -->
            <div id="contenedorReporte" style="margin-top:1rem;"></div>
        </section>

        <section id="exportarReporte">
            <h2>ğŸ“„ Exportar Reporte</h2>
            <div style="display: flex; gap: 0.75rem; margin-bottom: 1rem;">
                <button onclick="exportarReporteExcel()" style="flex:1; background:var(--success); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ“Š Exportar Excel</button>
                <button onclick="exportarReportePDF()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ“„ Exportar PDF</button>
            </div>
        </section> <!-- Cierre de la secciÃ³n Reportes Gerenciales -->
    </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: EMPRESAS (SISTEMA MULTI-EMPRESA) -->
<div class="side-content" id="side-empresas">
    <div class="sidebar-content">
        <!-- Selector de empresa activa -->
        <section id="selectorEmpresaActivaSection" style="background: var(--card-bg); padding: 1rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
            <h2 style="margin: 0 0 0.75rem 0; color: var(--text);">ğŸ¢ Empresa Activa
                <button onclick="mostrarAyudaEmpresas()" 
                        style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                        title="Â¿CÃ³mo funciona el sistema multi-empresa?">â“</button>
            </h2>
            <select id="selectorEmpresaActiva" onchange="cambiarEmpresaActiva()" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem;">
                <option value="">Todas las empresas</option>
            </select>
            <p style="color: var(--text-light); font-size: 0.875rem; margin-top: 0.5rem;">
                ğŸ’¡ Selecciona una empresa para filtrar todos los datos o "Todas las empresas" para ver todo consolidado.
            </p>
        </section>

        <!-- Formulario para agregar/editar empresas -->
        <section id="formularioEmpresa">
            <h2>ğŸ“ Registrar Empresa
                <button onclick="mostrarAyudaFormularioEmpresa()" 
                        style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                        title="Â¿QuÃ© campos son obligatorios?">â“</button>
            </h2>
            
            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
                <label for="empresaNombre">Nombre de la empresa <span style="color: var(--danger);">*</span>:</label>
                <input type="text" id="empresaNombre" placeholder="Ej: Mi Empresa C.A." style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                
                <label for="empresaRif">RIF/IdentificaciÃ³n:</label>
                <input type="text" id="empresaRif" placeholder="Ej: J-12345678-9" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                
                <label for="empresaTelefono">TelÃ©fono:</label>
                <input type="tel" id="empresaTelefono" placeholder="Ej: 0212-1234567" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                
                <label for="empresaDireccion">DirecciÃ³n:</label>
                <textarea id="empresaDireccion" placeholder="Ej: Av. Principal, Edificio Central, Piso 5" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem; min-height: 80px; resize: vertical;"></textarea>
                
                <label for="empresaSector">Sector econÃ³mico:</label>
                <select id="empresaSector" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;">
                    <option value="">Selecciona un sector</option>
                    <option value="Comercio">Comercio</option>
                    <option value="Servicios">Servicios</option>
                    <option value="Manufactura">Manufactura</option>
                    <option value="TecnologÃ­a">TecnologÃ­a</option>
                    <option value="ConstrucciÃ³n">ConstrucciÃ³n</option>
                    <option value="Salud">Salud</option>
                    <option value="EducaciÃ³n">EducaciÃ³n</option>
                    <option value="Finanzas">Finanzas</option>
                    <option value="Turismo">Turismo</option>
                    <option value="Transporte">Transporte</option>
                    <option value="Agricultura">Agricultura</option>
                    <option value="General">General</option>
                    <option value="Otro">Otro</option>
                </select>
                
                <!-- Campo para logo de la empresa -->
                <label for="empresaLogo">Logo de la empresa:</label>
                <div style="margin-bottom: 1rem;">
                    <input type="file" id="empresaLogo" accept="image/*" onchange="vistaPreviaLogo(this)" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:0.5rem;" />
                    <div id="vistaPreviaLogoContainer" style="display: none; margin-top: 0.5rem;">
                        <img id="vistaPreviaLogo" style="max-width: 150px; max-height: 100px; border: 1px solid #ddd; border-radius: 4px;" alt="Vista previa del logo">
                        <button type="button" onclick="eliminarLogo()" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Eliminar</button>
                    </div>
                </div>
                
                <div style="display: flex; gap: 0.75rem;">
                    <button onclick="agregarEmpresa()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">â• Agregar Empresa</button>
                    <button onclick="limpiarFormularioEmpresa()" style="flex:1; background:#6b7280; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ§¹ Limpiar</button>
                </div>
            </div>
        </section>

        <!-- Listado de empresas -->
        <section id="listadoEmpresas">
            <h2>ğŸ“‹ Empresas Registradas
                <button onclick="mostrarAyudaListadoEmpresas()" 
                        style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                        title="Â¿CÃ³mo gestionar las empresas?">â“</button>
            </h2>
            <div id="contenedorEmpresas" style="margin-top: 1rem;">
                <!-- Las empresas se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
                <p style="text-align: center; color: var(--text-light);">Cargando empresas...</p>
            </div>
        </section>

        <!-- Ejemplo de botÃ³n dentro de la secciÃ³n de Empresa -->
<div id="seccionHerramientas">
    <h3>MigraciÃ³n forzada</h3>
    <button onclick="reasignarMovimientosAEmpresaActiva()" style="padding: 0.5rem 1rem; background-color: #ffc107; color: #212529; border: none; border-radius: 4px; cursor: pointer;">
        ğŸ”§ Reasignar Movimientos a Empresa Activa
    </button>
</div>
    </div>
</div>

<!-- âœ… NUEVA PESTAÃ‘A: ASISTENTE FINANCIERO -->
<div class="side-content" id="side-asistente-financiero">
    <div class="sidebar-content">
        <section id="configuracionAsistente">
            <h2>âš™ï¸ Configurar Asistente
    <button onclick="mostrarAyudaAsistenteFinanciero()"
        style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
        title="Â¿CÃ³mo funciona el asistente financiero?">â“</button>
    <!-- âœ… NUEVO: BotÃ³n de ejemplo (solo texto) -->
<button onclick="mostrarEjemploAsistente()" 
    style="background: var(--info); color: rgb(151, 145, 145); border: none; border-radius: 6px; padding: 0.4rem 0.8rem; font-size: 0.9rem; font-weight: 500; cursor: pointer; margin-left: 0.5rem; transition: background 0.2s;"
    title="Ver ejemplo de uso">
    Ejemplo
</button>
</h2>

            <p style="color: var(--text-light); margin-bottom: 1.5rem;">Define las reglas que el asistente usarÃ¡ para sugerir acciones automÃ¡ticas.</p>

            <!-- Formulario para configurar reglas del asistente -->
            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
                <label for="reglaPalabraClave">Palabra clave:</label>
                <input type="text" id="reglaPalabraClave" placeholder="Ej: servicios, comida, transporte" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;" />
                <label for="reglaCategoria">CategorÃ­a objetivo:</label>
                <select id="reglaCategoria" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;">
                    <option value="">Selecciona una categorÃ­a</option>
                    <!-- Las opciones se cargarÃ¡n dinÃ¡micamente -->
                </select>
                <label for="reglaAccion">AcciÃ³n sugerida:</label>
                <select id="reglaAccion" style="width:100%; padding:0.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;">
                    <option value="sugerirAhorro">Sugerir plan de ahorro</option>
                    <option value="alertarGasto">Alertar por gasto alto</option>
                    <option value="recomendarCambio">Recomendar cambio de proveedor</option>
                </select>
                <div style="display: flex; gap: 0.75rem;">
                    <button onclick="agregarReglaAsistente()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">â• Agregar Regla</button>
                    <button onclick="limpiarFormularioRegla()" style="flex:1; background:#6b7280; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:1rem; cursor:pointer;">ğŸ§¹ Limpiar</button>
                </div>
            </div>

            <!-- âœ… BOTÃ“N PARA DESPLEGAR AJUSTES -->
<div style="margin-top: 1rem; display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: var(--card-bg); border-radius: var(--radius); cursor: pointer;" onclick="toggleAjustesAsistente()">
    <div style="display: flex; align-items: center; gap: 0.5rem;">
        <svg class="icon" viewBox="0 0 24 24" fill="#6B7280" style="width: 1rem; height: 1rem; transform: rotate(90deg); transition: transform 0.2s;">
            <path d="M12 2L2 7l10 5 10-5V2z"/>
        </svg>
        <span style="font-weight: 500;">Ajustes</span>
    </div>
    <svg class="icon" id="flechaAjustes" viewBox="0 0 24 24" fill="#6B7280" style="width: 1rem; height: 1rem; transition: transform 0.2s;">
        <path d="M16 12l-4 4-4-4H16z"/>
    </svg>
</div>

<!-- âœ… SECCIÃ“N DE AJUSTES (oculta por defecto) -->
<div id="seccionAjustes" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--card-bg); border-radius: var(--radius); border-left: 4px solid var(--primary); transition: all 0.2s ease;">
    <h3 style="margin: 0 0 1rem 0; color: var(--text);">âš™ï¸ Opciones de CategorÃ­as</h3>
    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
            <input type="checkbox" id="mostrarTodasCategorias" onchange="actualizarSelectCategoriasAsistente()" style="transform: scale(1.2); accent-color: var(--info);">
            <span>Mostrar todas las categorÃ­as del sistema</span>
        </label>
    </div>
    <p style="color: var(--text-light); font-size: 0.875rem; margin: 0;">Si estÃ¡ activado, podrÃ¡s usar cualquier categorÃ­a del sistema. Si estÃ¡ desactivado, solo verÃ¡s las categorÃ­as especÃ­ficas del asistente.</p>
</div>

            
        </section>

        <section id="sugerenciasAsistente">
            <h2>ğŸ“Œ Sugerencias del Asistente</h2>
            <div id="contenedorSugerencias" style="margin-top:1rem;">
                <!-- Las sugerencias se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
                <p style="text-align: center; color: var(--text-light);">No hay sugerencias disponibles en este momento.</p>
            </div>
        </section>

        <section id="historialAsistente">
            <h2>ğŸ“‹ Historial de Acciones</h2>
            <div id="contenedorHistorial" style="margin-top:1rem;">
                <!-- El historial de acciones se cargarÃ¡ dinÃ¡micamente aquÃ­ -->
                <p style="text-align: center; color: var(--text-light);">No hay acciones registradas aÃºn.</p>
            </div>
        </section> <!-- Cierre de la secciÃ³n Asistente Financiero -->
    </div>
</div>

  <script src="chart.umd.min.js?v=20251111"></script>
  <script src="xlsx.full.min.js?v=20251111"></script>
  <script src="equivalente-calculator.js"></script>
  <script src="presupuesto-sugerido.js"></script>
  <script src="app.js?v=20251111"></script>
  
  <!-- MODAL DE BLOQUEO (SIN CANCELAR) -->
<div id="modalBloqueo" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1001; justify-content:center; align-items:center;">
  <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; width:90%; max-width:350px; text-align:center;">
    <img class="icon-png" src="recursos/icons/privacy.png" alt="Lock">
    <h2 style="text-align: center;">Sistema de GestiÃ³n Financiera</h2>
    <p style="color:var(--text-light); margin-bottom:1.5rem;">Ingresa tu PIN de 4 dÃ­gitos para acceder.</p>
    <input type="password" id="pinInput" maxlength="4" minlength="4" placeholder="PIN de 4 dÃ­gitos" 
           style="width:100%; padding:1rem; font-size:1.5rem; text-align:center; margin-bottom:1.5rem; border:1px solid var(--text-light); border-radius:8px;"
           title="Escribe 'reset' si olvidaste tu PIN (solo para recuperaciÃ³n)">
    <button onclick="desbloquearApp()" style="width:100%; padding:1rem; font-size:1rem; background:#0b57d0; color:white; border:none; border-radius:8px;">Desbloquear</button>
    <button onclick="mostrarAyudaPinOlvidado()" 
            style="width:100%; padding:0.75rem; margin-top:1rem; background:transparent; color:var(--danger); border:1px solid var(--danger); border-radius:8px; font-size:0.9rem;">
      Â¿Olvidaste tu PIN?
    </button>
    <p id="avisoPinOlvidado" style="font-size:0.75rem; color:var(--text-light); margin-top:1.5rem; font-style:italic; display:none;">
      âš ï¸ Â¿No puedes acceder al sistema? Pulsa el botÃ³n <strong>"Â¿Olvidaste tu PIN?"</strong> y responde a las preguntas de seguridad.
    </p>
  </div>
</div>

  <!-- Toast -->
  <div id="toast-container">
  </div>

<div id="custom-confirm" class="custom-modal-overlay">
  <div class="custom-modal-content">
    <p id="confirm-message" style="font-weight: 500;"></p>
    <div class="confirm-actions">
      <button id="confirm-cancel" class="btn-cancelar">Cancelar</button>
      <button id="confirm-ok" class="btn-aceptar">Aceptar</button>
    </div>
  </div>

</div>

</div>

<!-- MODAL DE AYUDA (PRESUPUESTO)-->
<div id="modalAyudaPresupuesto" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1002; justify-content:center; align-items:center;">
  <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; width:90%; max-width:500px; max-height:80vh; overflow-y:auto; position:relative;">
    <button onclick="cerrarAyudaPresupuesto()" 
            style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; color:var(--text-light); cursor:pointer; padding:0.5rem; border-radius:50%; transition:background 0.2s;"
            title="Cerrar">âœ•</button>
    
    <h2 style="color:var(--primary); margin-bottom:1.5rem; text-align:center;">ğŸ¯ Â¿CÃ³mo funciona la pestaÃ±a Presupuesto?</h2>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ“Š Â¿QuÃ© puedes hacer aquÃ­?</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li><strong>Definir meta mensual:</strong> Establece tu presupuesto objetivo para el mes</li>
        <li><strong>Visualizar progreso:</strong> Ve quÃ© porcentaje has gastado de tu meta</li>
        <li><strong>AnÃ¡lisis detallado:</strong> Revisa gastos por categorÃ­a en los Ãºltimos 30 dÃ­as</li>
        <li><strong>Control total:</strong> Guarda, elimina o modifica tu meta cuando quieras</li>
      </ul>
    </div>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ’¡ Consejos Ãºtiles</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li>Define una meta realista basada en tus gastos histÃ³ricos</li>
        <li>Revisa frecuentemente el progreso para mantenerte en control</li>
        <li>Usa las categorÃ­as para identificar Ã¡reas de mayor gasto</li>
        <li>Ajusta tu meta mensualmente segÃºn tus necesidades</li>
      </ul>
    </div>
    
    <div style="background:var(--success-bg); padding:1rem; border-radius:8px; border-left:4px solid var(--success); margin-top:1.5rem;">
      <p style="margin:0; color:var(--success-text); font-size:0.875rem;">
        <strong>ğŸ‰ Pro tip:</strong> Una buena meta de presupuesto es entre el 50-70% de tus ingresos mensuales, dejando espacio para imprevistos.
      </p>
    </div>
    
  </div>
</div>

<!-- MODAL DE AYUDA (INVERSIONES)-->
<div id="modalAyudaInversiones" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1003; justify-content:center; align-items:center;">
  <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; width:90%; max-width:500px; max-height:80vh; overflow-y:auto; position:relative;">
    <button onclick="cerrarAyudaInversiones()" 
            style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; color:var(--text-light); cursor:pointer; padding:0.5rem; border-radius:50%; transition:background 0.2s;"
            title="Cerrar">âœ•</button>
    
    <h2 style="color:var(--primary); margin-bottom:1.5rem; text-align:center;">ğŸ“ˆ Â¿CÃ³mo funciona el Simulador de Inversiones?</h2>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ¯ Â¿QuÃ© es esto?</h3>
      <p style="color:var(--text-light); line-height:1.6; margin:0 0 1rem 0;">
        <strong>Â¡Es un simulador educativo!</strong> No inviertes dinero real, solo simulas inversiones para aprender y experimentar con diferentes estrategias.
      </p>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li><strong>Precios simulados:</strong> Los precios cambian automÃ¡ticamente cada vez que actualizas</li>
        <li><strong>Sin riesgo:</strong> Puedes experimentar con diferentes activos sin perder dinero</li>
        <li><strong>Educativo:</strong> Perfecto para aprender conceptos de inversiÃ³n</li>
        <li><strong>GrÃ¡ficos reales:</strong> Visualiza el rendimiento con grÃ¡ficos profesionales</li>
      </ul>
    </div>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ“Š Â¿QuÃ© puedes hacer aquÃ­?</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li><strong>Agregar inversiones:</strong> Simula compra de acciones, cripto o fondos</li>
        <li><strong>Seguimiento automÃ¡tico:</strong> Los precios se actualizan periÃ³dicamente</li>
        <li><strong>AnÃ¡lisis visual:</strong> Ve grÃ¡ficos de rendimiento y ganancias/pÃ©rdidas</li>
        <li><strong>Portafolio simulado:</strong> Gestiona mÃºltiples inversiones como en la vida real</li>
      </ul>
    </div>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ’¡ Consejos para usar el simulador</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li>Empieza con cantidades pequeÃ±as para experimentar</li>
        <li>Prueba diferentes tipos de activos (acciones, cripto, fondos)</li>
        <li>Observa cÃ³mo cambian los precios y afecta tu portafolio</li>
        <li>Usa fechas diferentes para simular inversiones a largo plazo</li>
      </ul>
    </div>
    
    <div style="background:var(--warning-bg); padding:1rem; border-radius:8px; border-left:4px solid var(--warning); margin-top:1.5rem;">
      <p style="margin:0; color:var(--warning-text); font-size:0.875rem;">
        <strong>âš ï¸ Recordatorio:</strong> Esto es solo un simulador educativo. No refleja inversiones reales ni precios de mercado actuales. Â¡Es perfecto para aprender sin riesgos!
      </p>
    </div>
    
  </div>
</div>

<!-- MODAL DE AYUDA (CALENDARIO)-->
<div id="modalAyudaCalendario" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1004; justify-content:center; align-items:center;">
  <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; width:90%; max-width:500px; max-height:80vh; overflow-y:auto; position:relative;">
    <button onclick="cerrarAyudaCalendario()" 
            style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; color:var(--text-light); cursor:pointer; padding:0.5rem; border-radius:50%; transition:background 0.2s;"
            title="Cerrar">âœ•</button>
    <h2 style="color:var(--primary); margin-bottom:1.5rem; text-align:center;">ğŸ“… Â¿CÃ³mo funciona el Calendario Interactivo?</h2>
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">âœ¨ Â¿QuÃ© ves aquÃ­?</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li><strong>Calendario del mes actual:</strong> Solo muestras los dÃ­as de este mes. Nada de dÃ­as de otros meses.</li>
        <li><strong>Puntos pulsantes:</strong> Los dÃ­as con movimientos tienen un pequeÃ±o punto azul que parpadea.</li>
        <li><strong>Hoy resaltado:</strong> El dÃ­a actual tiene un punto mÃ¡s grande y un fondo sutil.</li>
        <li><strong>Tarjetas detalladas:</strong> Haz clic en un dÃ­a para ver sus movimientos como tarjetas horizontales.</li>
        <li><strong>PaginaciÃ³n inteligente:</strong> Si hay mÃ¡s de 6 movimientos en un dÃ­a, navega con â† â†’</li>
      </ul>
    </div>
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ’¡ Consejo</h3>
      <p style="color:var(--text-light); line-height:1.6; margin:0;">
        Usa este calendario para ver rÃ¡pidamente en quÃ© dÃ­as tienes mÃ¡s actividad. Â¡Ideal para planificar tus ingresos y gastos semanales!
      </p>
    </div>
    <div style="background:var(--info-bg); padding:1rem; border-radius:8px; border-left:4px solid var(--info); margin-top:1.5rem;">
      <p style="margin:0; color:var(--info-text); font-size:0.875rem;">
        <strong>âœ¨ DiseÃ±o moderno:</strong> Este calendario fue creado con el estilo Windows 11: transparencias, blur y elegancia.
      </p>
    </div>
  </div>
</div>

</body>
</html>
